<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="Antelope_Toolbox_for_Matlab.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> </TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997347"></A>&nbsp;</H1>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1003423"></A>&nbsp;</H1>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1003426"></A>Antelope Toolbox for Matlab:</H1>
<P CLASS="Body">
<A NAME="pgfId-1003568"></A>Version 1.0</P>
<P CLASS="Body">
<A NAME="pgfId-1003569"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003570"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003584"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003531"></A>User's Manual and Tutorial</P>
<P CLASS="Body">
<A NAME="pgfId-1003542"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003543"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003546"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003548"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003549"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003553"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003554"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003555"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003556"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003557"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003547"></A>Kent Lindquist</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997350"></A>Introduction</H1>
<P CLASS="Body">
<A NAME="pgfId-997351"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997352"></A>This document describes an Antelope Software toolbox for Matlab. Matlab is a product of Mathworks, Inc. Antelope is a product of Boulder Real-Time technologies, Inc. Included in Antelope is the Datascope relational database system. This toolbox follows closely the interfaces to Datascope and Antelope built into other scripting environments such as Perl and TCL/Tk. This toolbox was developed under Solaris 2.6 on Sun Ultra computers, using Matlab version 5.3 </P>
<P CLASS="Body">
<A NAME="pgfId-997401"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997419"></A>Installation</H1>
<P CLASS="Body">
<A NAME="pgfId-997420"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997421"></A>The Antelope Toolbox for Matlab is intended to be installed in </P>
<P CLASS="Body">
<A NAME="pgfId-997422"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997423"></A>$ANTELOPE/data/matlab/antelope</P>
<P CLASS="Indented">
<A NAME="pgfId-1003619"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003631"></A>In addition to the presence of these component files, two links need to be installed, plus the Antelope toolbox commands need to be made available to Matlab users. The recommended way to meet these conditions is to run the program install_matlab_antelope_links. This will make the correct links, then prompt you to edit $MATLAB/toolbox/local/pathdef.m. </P>
<P CLASS="Body">
<A NAME="pgfId-1003745"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003746"></A>For reference, the links made by install_matlab_antelope_links are from </P>
<P CLASS="Body">
<A NAME="pgfId-1003651"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003636"></A>$MATLAB/toolbox/antelope -&gt; $ANTELOPE/data/matlab/antelope</P>
<P CLASS="Indented">
<A NAME="pgfId-1003763"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003764"></A>and </P>
<P CLASS="Indented">
<A NAME="pgfId-1003783"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003765"></A>$MATLAB/help/toolbox/antelope -&gt; $ANTELOPE/data/matlab/antelope/html</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003639"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003691"></A>The edits required are to modify pathdef.m for your installation (the default location is $MATLAB/toolbox/local/pathdef.m) to have two more entries: one for the toolbox commands (antelope/antelope) and one for the toolbox examples (antelope/examples). Taking a few lines out of a properly modified pathdef.m file:</P>
<P CLASS="Body">
<A NAME="pgfId-1003708"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003705"></A>% PATH DEFINED HERE -- Don't change this line.</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003707"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003692"></A>p = [...</P>
<P CLASS="Indented">
<A NAME="pgfId-1003696"></A>        matlabroot,'/toolbox/antelope/antelope:',...</P>
<P CLASS="Indented">
<A NAME="pgfId-1003697"></A>        matlabroot,'/toolbox/antelope/examples:',...</P>
<P CLASS="Indented">
<A NAME="pgfId-1003698"></A>        matlabroot,'/toolbox/matlab/general:',...</P>
<P CLASS="Indented">
<A NAME="pgfId-1003699"></A>        matlabroot,'/toolbox/matlab/ops:',...</P>
<P CLASS="Indented">
<A NAME="pgfId-1003700"></A>        matlabroot,'/toolbox/matlab/lang:',...</P>
<P CLASS="Indented">
<A NAME="pgfId-1003704"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1003777"></A>Help </H1>
<P CLASS="Body">
<A NAME="pgfId-997473"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997474"></A>All toolbox commands are documented with the standard Matlab help utilities. To see a list of available commands, type</P>
<P CLASS="Body">
<A NAME="pgfId-997475"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997476"></A>&gt;&gt; help antelope</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997430"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003596"></A>or (for the Matlab help window)</P>
<P CLASS="Body">
<A NAME="pgfId-1003597"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003598"></A>&gt;&gt; helpwin antelope</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003599"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003600"></A>or (for an HTML index of the help entries in a web browser)</P>
<P CLASS="Body">
<A NAME="pgfId-1003601"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003602"></A>&gt;&gt; doc antelope</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003603"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997477"></A>For a list of examples, type</P>
<P CLASS="Body">
<A NAME="pgfId-997478"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997479"></A>&gt;&gt; help antelope/examples</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997480"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999077"></A>`For help on individual commands, give the name of the command. For example:</P>
<P CLASS="Body">
<A NAME="pgfId-997511"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997483"></A>&gt;&gt; help dbopen</P>
<P CLASS="Indented">
<A NAME="pgfId-997484"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997485"></A> DBOPEN Open a Datascope Database</P>
<P CLASS="Indented">
<A NAME="pgfId-997486"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997487"></A>        DBPTR = DBOPEN ( FILENAME, OPENTYPE )</P>
<P CLASS="Indented">
<A NAME="pgfId-997488"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997489"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997490"></A>        dbopen opens the database specified by the path name</P>
<P CLASS="Indented">
<A NAME="pgfId-997491"></A>        FILENAME, using the permissions given by opentype. A</P>
<P CLASS="Indented">
<A NAME="pgfId-997492"></A>        database pointer with the database index filled in is</P>
<P CLASS="Indented">
<A NAME="pgfId-997493"></A>        returned in DBPTR. The opentype may be either r (for read</P>
<P CLASS="Indented">
<A NAME="pgfId-997494"></A>        only) or r+ (for reading and writing).   In the latter</P>
<P CLASS="Indented">
<A NAME="pgfId-997495"></A>        case, the db package will attempt to open tables</P>
<P CLASS="Indented">
<A NAME="pgfId-997496"></A>        read/write, but if permissions are incorrect, will open</P>
<P CLASS="Indented">
<A NAME="pgfId-997497"></A>        the table read only.</P>
<P CLASS="Indented">
<A NAME="pgfId-997498"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997518"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997502"></A>        Antelope Toolbox for Matlab</P>
<P CLASS="Indented">
<A NAME="pgfId-997503"></A>                    [Antelope is a product of Boulder Real Time Technologies, Inc.]</P>
<P CLASS="Indented">
<A NAME="pgfId-997504"></A>        Kent Lindquist</P>
<P CLASS="Indented">
<A NAME="pgfId-997505"></A>        Geophysical Institute</P>
<P CLASS="Indented">
<A NAME="pgfId-997506"></A>        University of Alaska, Fairbanks</P>
<P CLASS="Indented">
<A NAME="pgfId-997507"></A>        1997</P>
<P CLASS="Indented">
<A NAME="pgfId-997481"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997519"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003606"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003607"></A>The other versions of the help system also work for individual commands:</P>
<P CLASS="Body">
<A NAME="pgfId-1003608"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003612"></A>&gt;&gt; helpwin dbopen</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003613"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003609"></A>or</P>
<P CLASS="Body">
<A NAME="pgfId-1003610"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003611"></A>&gt;&gt; doc dbopen</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997520"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997530"></A>For further insight, consult the man pages and manuals provided with the Antelope software and the Matlab software.</P>
<P CLASS="Body">
<A NAME="pgfId-997531"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997521"></A>Opening a Database</H1>
<P CLASS="Body">
<A NAME="pgfId-997535"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997536"></A>Databases are opened with the dbopen command, which takes a filename and a permissions flag. For convenience the Matlab Antelope Toolbox contains a demonstration database from the Joint Seismic Program Center. The schema for this database is CSS3.0. The filename of this database is available through the command </P>
<P CLASS="Body">
<A NAME="pgfId-997537"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997540"></A>&gt;&gt; dbexample_get_demodb_path</P>
<P CLASS="Indented">
<A NAME="pgfId-997541"></A>demodb_path is /opt/antelope/4.2u/data/matlab/antelope/examples/demodb/demo</P>
<P CLASS="Indented">
<A NAME="pgfId-997542"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997528"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997547"></A>The dbopen command returns a four-element structure called a database pointer:</P>
<P CLASS="Body">
<A NAME="pgfId-997570"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997571"></A>&gt;&gt; db = dbopen(demodb_path,'r')</P>
<P CLASS="Indented">
<A NAME="pgfId-997551"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997552"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-997553"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997554"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-997555"></A>       table: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-997560"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-997561"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-997562"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997563"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997548"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997529"></A>Under normal conditions the user does not modify these fields directly, with the possible exception of the record field. Two tools are provided to aim the database pointer at specific parts of the database (i.e. set the integers correctly). dblookup is the most general of the two. A shorthand version of dblookup, dblookup_table, is provided for the most common operation, aiming the database pointer at a given table of the database:</P>
<P CLASS="Body">
<A NAME="pgfId-997574"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997577"></A>&gt;&gt; db=dblookup_table(db,'origin')</P>
<P CLASS="Indented">
<A NAME="pgfId-997578"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997579"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-997580"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997581"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-997582"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-997583"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-997584"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-997585"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997586"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997600"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997566"></A>Databases may be closed with the dbclose command, which destroys the database pointer:</P>
<P CLASS="Body">
<A NAME="pgfId-997606"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997609"></A>&gt;&gt; dbclose(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-997610"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997607"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997567"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997930"></A>Handling Parametric Data</H1>
<P CLASS="Body">
<A NAME="pgfId-997931"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997624"></A>The following examples show some common database operations. These examples presume you have already opened the database and looked up the origin table, as shown in the steps above. We can subset our database:</P>
<P CLASS="Body">
<A NAME="pgfId-997642"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997643"></A>&gt;&gt;db=dbsubset(db,'mb &gt; 6');</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997837"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997838"></A>Find out how many records we have:</P>
<P CLASS="Body">
<A NAME="pgfId-997839"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997648"></A>&gt;&gt; dbquery(db,'dbRECORD_COUNT')</P>
<P CLASS="Indented">
<A NAME="pgfId-997649"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997650"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-997651"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997652"></A>    18</P>
<P CLASS="Indented">
<A NAME="pgfId-997653"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997654"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997840"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997841"></A>Ask for a column of values:</P>
<P CLASS="Body">
<A NAME="pgfId-997842"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997659"></A>&gt;&gt; mb=dbgetv(db,'mb')   </P>
<P CLASS="Indented">
<A NAME="pgfId-997660"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997661"></A>mb =</P>
<P CLASS="Indented">
<A NAME="pgfId-997662"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997663"></A>    6.4200</P>
<P CLASS="Indented">
<A NAME="pgfId-997664"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-997665"></A>    6.2000</P>
<P CLASS="Indented">
<A NAME="pgfId-997666"></A>    6.2000</P>
<P CLASS="Indented">
<A NAME="pgfId-997667"></A>    6.2300</P>
<P CLASS="Indented">
<A NAME="pgfId-997668"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-997669"></A>    6.3100</P>
<P CLASS="Indented">
<A NAME="pgfId-997670"></A>    6.0200</P>
<P CLASS="Indented">
<A NAME="pgfId-997671"></A>    6.2800</P>
<P CLASS="Indented">
<A NAME="pgfId-997672"></A>    6.5000</P>
<P CLASS="Indented">
<A NAME="pgfId-997673"></A>    6.5700</P>
<P CLASS="Indented">
<A NAME="pgfId-997674"></A>    6.1100</P>
<P CLASS="Indented">
<A NAME="pgfId-997675"></A>    6.0500</P>
<P CLASS="Indented">
<A NAME="pgfId-997676"></A>    6.2100</P>
<P CLASS="Indented">
<A NAME="pgfId-997677"></A>    6.3000</P>
<P CLASS="Indented">
<A NAME="pgfId-997678"></A>    6.3000</P>
<P CLASS="Indented">
<A NAME="pgfId-997679"></A>    6.2700</P>
<P CLASS="Indented">
<A NAME="pgfId-997680"></A>    6.1400</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997681"></A> &nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997843"></A>Or ask for several columns of values:</P>
<P CLASS="Body">
<A NAME="pgfId-997844"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997657"></A>&gt;&gt; [lat,lon,depth,time] = dbgetv(db,'lat','lon','depth','time');</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997688"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997845"></A>Convert the epoch-times (seconds since 1970) for the hypocentral occurrence time to a standard readable format:</P>
<P CLASS="Body">
<A NAME="pgfId-997848"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997691"></A>&gt;&gt; strydtime(time)</P>
<P CLASS="Indented">
<A NAME="pgfId-997692"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997693"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-997694"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997695"></A>    ' 5/04/1992 (125)  8:45:10.089'</P>
<P CLASS="Indented">
<A NAME="pgfId-997696"></A>    ' 5/12/1992 (133) 18:05:42.600'</P>
<P CLASS="Indented">
<A NAME="pgfId-997697"></A>    ' 5/15/1992 (136)  7:05:05.300'</P>
<P CLASS="Indented">
<A NAME="pgfId-997698"></A>    ' 5/17/1992 (138)  9:49:19.100'</P>
<P CLASS="Indented">
<A NAME="pgfId-997699"></A>    ' 5/17/1992 (138)  9:49:21.689'</P>
<P CLASS="Indented">
<A NAME="pgfId-997700"></A>    ' 5/17/1992 (138) 10:15:31.300'</P>
<P CLASS="Indented">
<A NAME="pgfId-997701"></A>    ' 5/17/1992 (138) 21:36:00.492'</P>
<P CLASS="Indented">
<A NAME="pgfId-997702"></A>    ' 5/19/1992 (140) 14:42:48.813'</P>
<P CLASS="Indented">
<A NAME="pgfId-997703"></A>    ' 5/20/1992 (141) 12:20:34.700'</P>
<P CLASS="Indented">
<A NAME="pgfId-997704"></A>    ' 5/21/1992 (142)  4:59:57.500'</P>
<P CLASS="Indented">
<A NAME="pgfId-997705"></A>    ' 5/21/1992 (142)  5:00:00.399'</P>
<P CLASS="Indented">
<A NAME="pgfId-997706"></A>    ' 5/21/1992 (142) 18:05:48.543'</P>
<P CLASS="Indented">
<A NAME="pgfId-997707"></A>    ' 5/22/1992 (143) 21:40:36.691'</P>
<P CLASS="Indented">
<A NAME="pgfId-997708"></A>    ' 5/25/1992 (146)  2:51:32.311'</P>
<P CLASS="Indented">
<A NAME="pgfId-997709"></A>    ' 5/25/1992 (146) 16:55:04.100'</P>
<P CLASS="Indented">
<A NAME="pgfId-997710"></A>    ' 5/27/1992 (148)  5:13:38.800'</P>
<P CLASS="Indented">
<A NAME="pgfId-997711"></A>    ' 5/27/1992 (148)  5:13:41.635'</P>
<P CLASS="Indented">
<A NAME="pgfId-997712"></A>    ' 5/28/1992 (149) 21:24:51.822'</P>
<P CLASS="Indented">
<A NAME="pgfId-997778"></A> &nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997849"></A>Or we can customize the time-conversion format:</P>
<P CLASS="Body">
<A NAME="pgfId-997851"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997850"></A>&gt;&gt; epoch2str(time,'%A %b %d %I:%M %p %Z')</P>
<P CLASS="Indented">
<A NAME="pgfId-997779"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997780"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-997781"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997782"></A>    'Monday May 04 08:45 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997783"></A>    'Tuesday May 12 06:05 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997784"></A>    'Friday May 15 07:05 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997785"></A>    'Sunday May 17 09:49 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997786"></A>    'Sunday May 17 09:49 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997787"></A>    'Sunday May 17 10:15 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997788"></A>    'Sunday May 17 09:36 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997789"></A>    'Tuesday May 19 02:42 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997790"></A>    'Wednesday May 20 12:20 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997791"></A>    'Thursday May 21 04:59 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997792"></A>    'Thursday May 21 05:00 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997793"></A>    'Thursday May 21 06:05 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997794"></A>    'Friday May 22 09:40 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997795"></A>    'Monday May 25 02:51 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997796"></A>    'Monday May 25 04:55 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997797"></A>    'Wednesday May 27 05:13 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997798"></A>    'Wednesday May 27 05:13 AM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997799"></A>    'Thursday May 28 09:24 PM UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-997800"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997801"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001532"></A> &nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997932"></A>As an aside, we can go the other way too:</P>
<P CLASS="Body">
<A NAME="pgfId-1001533"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997935"></A>&gt;&gt; str2epoch('2/13/98 15:17')</P>
<P CLASS="Indented">
<A NAME="pgfId-997936"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997937"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-997938"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997939"></A>   887383020</P>
<P CLASS="Indented">
<A NAME="pgfId-997940"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997941"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997933"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997944"></A>or</P>
<P CLASS="Body">
<A NAME="pgfId-1001534"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997947"></A>&gt;&gt; str2epoch('now')</P>
<P CLASS="Indented">
<A NAME="pgfId-997948"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997949"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-997950"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997951"></A>   9.2039e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-997952"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997945"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997852"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997854"></A>We can pick out the first record in our database view (note the indexing convention!):</P>
<P CLASS="Body">
<A NAME="pgfId-997857"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997853"></A> &gt;&gt; db.record=0</P>
<P CLASS="Indented">
<A NAME="pgfId-997812"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997813"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-997814"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997815"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-997816"></A>       table: 36</P>
<P CLASS="Indented">
<A NAME="pgfId-997817"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-997818"></A>      record: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-997819"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997820"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997858"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997859"></A>Find the iasp91 P-phase travel time in seconds from the hypocenter to Fairbanks:</P>
<P CLASS="Body">
<A NAME="pgfId-997862"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997828"></A>&gt;&gt; dbeval(db,'pphasetime(distance(lat,lon,64.836,-147.7048),depth)')</P>
<P CLASS="Indented">
<A NAME="pgfId-997829"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997830"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-997831"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997832"></A>  780.7877</P>
<P CLASS="Indented">
<A NAME="pgfId-997833"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997834"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997772"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997863"></A>We can launch a spreadsheet tool (dbe) on our whole database:</P>
<P CLASS="Body">
<A NAME="pgfId-997868"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997871"></A>&gt;&gt; unix(['dbe ' demodb_path '&amp;'])</P>
<P CLASS="Indented">
<A NAME="pgfId-997872"></A>[1] 17990</P>
<P CLASS="Indented">
<A NAME="pgfId-997873"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997874"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-997875"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997876"></A>     0</P>
<P CLASS="Indented">
<A NAME="pgfId-997877"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-997878"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-997869"></A>&nbsp;</P>
<DIV>
<IMG SRC="Antelope_Toolbox_for_Matlab-1.gif">
</DIV>
<P CLASS="Body">
<A NAME="pgfId-997644"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997888"></A>and examine the individual tables by clicking on the buttons. </P>
<P CLASS="Body">
<A NAME="pgfId-997890"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1000446"></A>Handling Waveform Data</H1>
<P CLASS="Body">
<A NAME="pgfId-1000444"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997958"></A>The database contains data for one earthquake. We can get the data for the P wave in one of two ways. First we need to get the correct database pointer:</P>
<P CLASS="Body">
<A NAME="pgfId-997959"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-997960"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-997967"></A>&gt;&gt; dbt=dblookup_table(db,'arrival');</P>
<P CLASS="Indented">
<A NAME="pgfId-997972"></A>&gt;&gt; db=dbjoin(dbt,db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001976"></A>&gt;&gt; db= dbsubset(db,'arrival.chan == wfdisc.chan');</P>
<P CLASS="Indented">
<A NAME="pgfId-997977"></A>&gt;&gt; dbt=dblookup_table(db,'assoc');</P>
<P CLASS="Indented">
<A NAME="pgfId-997982"></A>&gt;&gt; db=dbjoin(dbt,db);</P>
<P CLASS="Indented">
<A NAME="pgfId-997987"></A>&gt;&gt;dbt=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-997992"></A>&gt;&gt; db=dbjoin(dbt,db);</P>
<P CLASS="Indented">
<A NAME="pgfId-998004"></A>&gt;&gt; db=dbsubset(db,'sta == &quot;CHM&quot; &amp;&amp; chan == &quot;BHZ&quot;');</P>
<P CLASS="Indented">
<A NAME="pgfId-998045"></A>&gt;&gt; [time,endtime]=dbgetv(db,'time','endtime')</P>
<P CLASS="Indented">
<A NAME="pgfId-998046"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998047"></A>time =</P>
<P CLASS="Indented">
<A NAME="pgfId-998048"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998049"></A>     7.061397100070000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-998050"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998051"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998052"></A>endtime =</P>
<P CLASS="Indented">
<A NAME="pgfId-998053"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998054"></A>     7.061398415000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-998055"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998056"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998059"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998060"></A>Now we have a couple options for getting data. We can use TRLOAD_CSS to load the database waveform contents into a trace-object, another database pointer that includes information on waveforms loaded into memory; or we can use TRGETWF. The former, which is the preferred method, requires us to call TREXTRACT_DATA to get the actual waveform data:</P>
<P CLASS="Body">
<A NAME="pgfId-998061"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998062"></A>&gt;&gt; tr=trload_css(db,time,endtime);</P>
<P CLASS="Indented">
<A NAME="pgfId-998063"></A>&gt;&gt;data1=trextract_data(tr);</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998064"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998065"></A>Or we can go directly to the waveform data from the database pointer:</P>
<P CLASS="Body">
<A NAME="pgfId-998068"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998072"></A>&gt;&gt; [data2,nsamp,t0,t1]=trgetwf(db,time,endtime);</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998071"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998066"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997925"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997926"></A>Response information</H1>
<P CLASS="Body">
<A NAME="pgfId-997927"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998972"></A>Response information stored in a database may be loaded into a dbresponse object for evaluation. We precede our demonstration of this with an extraction of the correct filename from the database: </P>
<P CLASS="Body">
<A NAME="pgfId-998975"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998992"></A>&gt;&gt; db=dblookup_table(db,'sensor');</P>
<P CLASS="Indented">
<A NAME="pgfId-998075"></A>&gt;&gt; dbinst=dblookup_table(db,'instrument');</P>
<P CLASS="Indented">
<A NAME="pgfId-998079"></A>&gt;&gt; db=dbjoin(db,dbinst);</P>
<P CLASS="Indented">
<A NAME="pgfId-998984"></A>&gt;&gt; db.record=dbfind(db,'sta == &quot;CHM&quot; &amp;&amp; chan == &quot;BHZ&quot;');</P>
<P CLASS="Indented">
<A NAME="pgfId-998080"></A>&gt;&gt; respfile = dbfilename(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-998961"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998962"></A>respfile =</P>
<P CLASS="Indented">
<A NAME="pgfId-998963"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998964"></A>/opt/antelope/4.2u/data/matlab/antelope/examples/demodb/response/sts2_vel_RT72A.1</P>
<P CLASS="Indented">
<A NAME="pgfId-999019"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999020"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998958"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998993"></A>Now we use this filename to construct a dbresponse object:</P>
<P CLASS="Body">
<A NAME="pgfId-998994"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998957"></A>&gt;&gt; resp=dbresponse(respfile) </P>
<P CLASS="Indented">
<A NAME="pgfId-998090"></A>resp = </P>
<P CLASS="Indented">
<A NAME="pgfId-998091"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998092"></A>        dbresponse object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-998093"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998094"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999005"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999006"></A>Next we use the eval_response command to evaluate the response curve at 5 Hz, noting the conversion to radians/sec:</P>
<P CLASS="Body">
<A NAME="pgfId-999007"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998996"></A>&gt;&gt; eval_response(resp, 5 * 2 * pi)</P>
<P CLASS="Indented">
<A NAME="pgfId-998997"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998998"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998999"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999000"></A>   0.9969 - 0.0749i</P>
<P CLASS="Indented">
<A NAME="pgfId-999001"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999015"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999018"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999008"></A>The returned value is in general complex. Next we evaluate the response for several frequencies at once:</P>
<P CLASS="Body">
<A NAME="pgfId-999009"></A> &nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998098"></A>&gt;&gt; myvals = eval_response(resp,[0.1; 1; 10]*6.28)</P>
<P CLASS="Indented">
<A NAME="pgfId-998099"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998100"></A>myvals =</P>
<P CLASS="Indented">
<A NAME="pgfId-998101"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998102"></A>   0.9968 - 0.0502i</P>
<P CLASS="Indented">
<A NAME="pgfId-998103"></A>   0.6239 - 0.7815i</P>
<P CLASS="Indented">
<A NAME="pgfId-998108"></A>  -0.0115 - 0.0053i</P>
<P CLASS="Indented">
<A NAME="pgfId-998109"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998110"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998085"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999010"></A>These results are of course amenable to standard Matlab processing:</P>
<P CLASS="Body">
<A NAME="pgfId-999011"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998120"></A>&gt;&gt; abs(myvals)</P>
<P CLASS="Indented">
<A NAME="pgfId-998121"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998122"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998123"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998124"></A>    0.9980</P>
<P CLASS="Indented">
<A NAME="pgfId-998125"></A>    1.0000</P>
<P CLASS="Indented">
<A NAME="pgfId-998126"></A>    0.0126</P>
<P CLASS="Indented">
<A NAME="pgfId-998127"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998132"></A>&gt;&gt;angle(myvals)*180/pi</P>
<P CLASS="Indented">
<A NAME="pgfId-998133"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998134"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998135"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998136"></A>   -2.8853</P>
<P CLASS="Indented">
<A NAME="pgfId-998137"></A>  -51.3982</P>
<P CLASS="Indented">
<A NAME="pgfId-998138"></A> -155.2421</P>
<P CLASS="Indented">
<A NAME="pgfId-998139"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998140"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999012"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999013"></A>When we are done with the dbresponse object, we remove it with the free_response command:</P>
<P CLASS="Body">
<A NAME="pgfId-999014"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998144"></A>&gt;&gt; free_response(resp)</P>
<P CLASS="Indented">
<A NAME="pgfId-998145"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-998073"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998083"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997415"></A>Parameter files</H1>
<P CLASS="Body">
<A NAME="pgfId-997416"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997417"></A>Antelope parameter files allow the specification of ASCII-text parameter files. For complete documentation, see the Antelope manuals. </P>
<P CLASS="Body">
<A NAME="pgfId-998148"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998569"></A>As an example, here's a small text file in my current working directory:</P>
<P CLASS="Body">
<A NAME="pgfId-998572"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998151"></A>nordic% cat /home/kent/temp/test.pf</P>
<P CLASS="Indented">
<A NAME="pgfId-998152"></A>cat /home/kent/temp/test.pf</P>
<P CLASS="Indented">
<A NAME="pgfId-998153"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998154"></A># Test parameter file</P>
<P CLASS="Indented">
<A NAME="pgfId-998155"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998156"></A>number_of_things 3</P>
<P CLASS="Indented">
<A NAME="pgfId-998157"></A>string_thing Dr. Seuss Lives</P>
<P CLASS="Indented">
<A NAME="pgfId-998550"></A>myboolean True</P>
<P CLASS="Indented">
<A NAME="pgfId-998158"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998159"></A>thing_names &amp;Tbl{</P>
<P CLASS="Indented">
<A NAME="pgfId-998160"></A>ball</P>
<P CLASS="Indented">
<A NAME="pgfId-998161"></A>chew-toy</P>
<P CLASS="Indented">
<A NAME="pgfId-998162"></A>toy mouse</P>
<P CLASS="Indented">
<A NAME="pgfId-998509"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-998510"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998511"></A>thing_owners &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998166"></A>        ball            Kirby</P>
<P CLASS="Indented">
<A NAME="pgfId-998167"></A>        chewtoy         Rover</P>
<P CLASS="Indented">
<A NAME="pgfId-998168"></A>        mouse           Jasmine</P>
<P CLASS="Indented">
<A NAME="pgfId-998169"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-998515"></A>on_the_fly &amp;ask What is a convenient value for this</P>
<P CLASS="Indented">
<A NAME="pgfId-998170"></A>nordic%</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998573"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998574"></A>To open this as a parameter file, type the following:</P>
<P CLASS="Body">
<A NAME="pgfId-998575"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998174"></A>&gt;&gt; pf=dbpf('test')</P>
<P CLASS="Indented">
<A NAME="pgfId-998175"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998176"></A>pf = </P>
<P CLASS="Indented">
<A NAME="pgfId-998177"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998178"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-998179"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998188"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998576"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998577"></A>The returned object is called a parameter-file (dbpf) object. This one was actually constructed from the single file shown above. However, the PFPATH environment variable specifies all the locations which may contain parameter files, and all files of the specified name are read. Repeated parameters are overwritten in the order in which they are read, allowing users to override default settings of software packages with subsets of parameter files in their own directories and with correct settings of PFPATH. </P>
<P CLASS="Body">
<A NAME="pgfId-998580"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998581"></A>To see which existent, readable files will contribute to a dbpf object, use pffiles:</P>
<P CLASS="Body">
<A NAME="pgfId-998578"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998579"></A>&gt;&gt; pffiles('test')</P>
<P CLASS="Indented">
<A NAME="pgfId-998189"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998190"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998191"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998192"></A>    './test.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998193"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998691"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998692"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998582"></A>To see all the possibilities that are investigated, regardless of whether they exist or are readable, use the `all' option:</P>
<P CLASS="Body">
<A NAME="pgfId-998583"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998198"></A>&gt;&gt; pffiles('test','all')</P>
<P CLASS="Indented">
<A NAME="pgfId-998199"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998200"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998201"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998202"></A>    '/opt/antelope/4.2u/data/maps/site/test.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998203"></A>    '/opt/antelope/4.2u/data/pf/test.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998204"></A>    '/opt/antelope/4.2u/data/pf/site/test.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998205"></A>    '/home/kent/data/pf/test.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998206"></A>    './test.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998696"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998697"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998207"></A> &nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998584"></A>Now, to see the parameter names in the parameter-file object, use pfkeys:</P>
<P CLASS="Body">
<A NAME="pgfId-998589"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998211"></A>&gt;&gt; pfkeys(pf)      </P>
<P CLASS="Indented">
<A NAME="pgfId-998212"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998213"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998214"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998215"></A>    'number_of_things'</P>
<P CLASS="Indented">
<A NAME="pgfId-998216"></A>    'string_thing'</P>
<P CLASS="Indented">
<A NAME="pgfId-998217"></A>    'thing_names'</P>
<P CLASS="Indented">
<A NAME="pgfId-998218"></A>    'thing_owners'</P>
<P CLASS="Indented">
<A NAME="pgfId-998698"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998699"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998219"></A> &nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998590"></A>To convert the entire object to a string, use pf2string:</P>
<P CLASS="Body">
<A NAME="pgfId-998591"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998220"></A>&gt;&gt; pf2string(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-998221"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998222"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998223"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998554"></A>myboolean True</P>
<P CLASS="Indented">
<A NAME="pgfId-998224"></A>number_of_things        3</P>
<P CLASS="Indented">
<A NAME="pgfId-998519"></A>on_the_fly &amp;ask What is a convenient value for this</P>
<P CLASS="Indented">
<A NAME="pgfId-998225"></A>string_thing    Dr. Seuss Lives</P>
<P CLASS="Indented">
<A NAME="pgfId-998226"></A>thing_names     &amp;Tbl{</P>
<P CLASS="Indented">
<A NAME="pgfId-998227"></A>ball</P>
<P CLASS="Indented">
<A NAME="pgfId-998228"></A>chew-toy</P>
<P CLASS="Indented">
<A NAME="pgfId-998229"></A>toy mouse</P>
<P CLASS="Indented">
<A NAME="pgfId-998230"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-998231"></A>thing_owners    &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998232"></A>ball    Kirby</P>
<P CLASS="Indented">
<A NAME="pgfId-998233"></A>chewtoy Rover</P>
<P CLASS="Indented">
<A NAME="pgfId-998234"></A>mouse   Jasmine</P>
<P CLASS="Indented">
<A NAME="pgfId-998235"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-998700"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998701"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998236"></A> &nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998237"></A> To extract a single numeric parameter out of the dbpf object, use pfget_num. This actually retrieves the parameter as a string, then applies the Matlab str2num function.</P>
<P CLASS="Body">
<A NAME="pgfId-998592"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998246"></A>&gt;&gt; pfget_num(pf,'number_of_things')</P>
<P CLASS="Indented">
<A NAME="pgfId-998247"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998248"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998249"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998250"></A>     3</P>
<P CLASS="Indented">
<A NAME="pgfId-998251"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998252"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998705"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998706"></A>To get string values, use pfget_string:</P>
<P CLASS="Body">
<A NAME="pgfId-998594"></A> &nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998256"></A>&gt;&gt; pfget_string(pf,'string_thing')</P>
<P CLASS="Indented">
<A NAME="pgfId-998257"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998258"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998259"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998260"></A>Dr. Seuss Lives</P>
<P CLASS="Indented">
<A NAME="pgfId-998261"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998262"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998595"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998596"></A>To get boolean values, use pfget_boolean. This returns -1 (which evaluates to true in an if statement) for affirmative values (`true','yes', etc.) in the parameter file, and 0 for negative values. </P>
<P CLASS="Body">
<A NAME="pgfId-998597"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998558"></A>&gt;&gt; pfget_boolean(pf,'myboolean')</P>
<P CLASS="Indented">
<A NAME="pgfId-998559"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998560"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998561"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998562"></A>    -1</P>
<P CLASS="Indented">
<A NAME="pgfId-998563"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998564"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998707"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998598"></A>Lists of things may be retrieved from the parameter file with pfget_tbl:</P>
<P CLASS="Body">
<A NAME="pgfId-998599"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998266"></A>&gt;&gt; pfget_tbl(pf,'thing_names')</P>
<P CLASS="Indented">
<A NAME="pgfId-998267"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998268"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998269"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998270"></A>    'ball'</P>
<P CLASS="Indented">
<A NAME="pgfId-998271"></A>    'chew-toy'</P>
<P CLASS="Indented">
<A NAME="pgfId-998272"></A>    'toy mouse'</P>
<P CLASS="Indented">
<A NAME="pgfId-998273"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998274"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998708"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998600"></A>Also, the parameter file may contain associative arrays of key--value pairs. Notice that such an entity is really just like a nested parameter file, so these are returned as subsidiary dbpf objects, as shown by this return from the pfget_arr command:</P>
<P CLASS="Body">
<A NAME="pgfId-998601"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998278"></A>&gt;&gt; pfget_arr(pf,'thing_owners')</P>
<P CLASS="Indented">
<A NAME="pgfId-998279"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998280"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998281"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998282"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-998283"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998284"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998602"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998603"></A>Of course, Matlab has a built-in strategy for dealing with blocks of key-value pairs, namely the structure. Therefore there is a command pf2struct to convert a dbpf object to a Matlab struct. There is a caveat here, however. Matlab structure-field names are limited in length, and are not allowed to contain any strange characters. The underlying parameter-file implementation is much more tolerant. Therefore if you have long names or weird names with dots and hashes in them, pf2struct will fail and you will need to use pfget_string or other appropriate functions on the subsidiary dbpf object. </P>
<P CLASS="Body">
<A NAME="pgfId-998612"></A>With reasonable parameter files, however, pf2struct will work fine:</P>
<P CLASS="Body">
<A NAME="pgfId-998608"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998609"></A>&gt;&gt; mystruct=pf2struct(ans)</P>
<P CLASS="Indented">
<A NAME="pgfId-998289"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998290"></A>mystruct = </P>
<P CLASS="Indented">
<A NAME="pgfId-998291"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998292"></A>       ball: 'Kirby'</P>
<P CLASS="Indented">
<A NAME="pgfId-998293"></A>    chewtoy: 'Rover'</P>
<P CLASS="Indented">
<A NAME="pgfId-998294"></A>      mouse: 'Jasmine'</P>
<P CLASS="Indented">
<A NAME="pgfId-998613"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998614"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998615"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998616"></A>In order to simplify reading complex, nested parameter files, the pfget_arr, pfget_tbl, pf2struct, pfget, and pfresolve commands (the latter are described below) allow a `recursive' option:</P>
<P CLASS="Body">
<A NAME="pgfId-998617"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998298"></A>&gt;&gt; pfget_arr(pf,'thing_owners','recursive')</P>
<P CLASS="Indented">
<A NAME="pgfId-998299"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998300"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998301"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998302"></A>       ball: 'Kirby'</P>
<P CLASS="Indented">
<A NAME="pgfId-998303"></A>    chewtoy: 'Rover'</P>
<P CLASS="Indented">
<A NAME="pgfId-998304"></A>      mouse: 'Jasmine'</P>
<P CLASS="Indented">
<A NAME="pgfId-998305"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998333"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998624"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998625"></A>The pfget routine is generic, exercising its discretion on what datatype to return. Numbers are always considered string values, which may be converted by the user with Matlab's str2num function:</P>
<P CLASS="Body">
<A NAME="pgfId-998626"></A> &nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998334"></A>&gt;&gt; pfget(pf,'thing_names')</P>
<P CLASS="Indented">
<A NAME="pgfId-998335"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998316"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998317"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998318"></A>    'ball'</P>
<P CLASS="Indented">
<A NAME="pgfId-998319"></A>    'chew-toy'</P>
<P CLASS="Indented">
<A NAME="pgfId-998320"></A>    'toy mouse'</P>
<P CLASS="Indented">
<A NAME="pgfId-998321"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998322"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998627"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998628"></A>If a parameter-file entry is specified with the &amp;ask tag, as is the parameter named on_the_fly above, the user will be queried directly. This is based on the Matlab INPUT command, which means that answer may be given using the full-fledged Matlab interpreter:</P>
<P CLASS="Body">
<A NAME="pgfId-998629"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998523"></A>&gt;&gt; pfget(pf,'on_the_fly')</P>
<P CLASS="Indented">
<A NAME="pgfId-998524"></A>What is a convenient value for this : 27 + 13*pi </P>
<P CLASS="Indented">
<A NAME="pgfId-998525"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998526"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998527"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998528"></A>   67.8407</P>
<P CLASS="Indented">
<A NAME="pgfId-998529"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998530"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998709"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998630"></A>Repeated calls are dynamically re-queried:</P>
<P CLASS="Body">
<A NAME="pgfId-998631"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998535"></A>&gt;&gt; pfget(pf,'on_the_fly')</P>
<P CLASS="Indented">
<A NAME="pgfId-998536"></A>What is a convenient value for this : 'a string value'</P>
<P CLASS="Indented">
<A NAME="pgfId-998537"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998538"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998539"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998540"></A>a string value</P>
<P CLASS="Indented">
<A NAME="pgfId-998541"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998542"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998339"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998632"></A>Next, we will look at a more complex example. Real-time operations at the Alaska Earthquake Information Center are managed in part by a parameter-file specifying real-time system setup. This is actually one of several files, helping administrators track the multiple Antelope Seismic Information Systems that are running.</P>
<P CLASS="Body">
<A NAME="pgfId-998637"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998533"></A>&gt;&gt; setup=dbpf('aeic_rtsys')</P>
<P CLASS="Indented">
<A NAME="pgfId-998340"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998341"></A>setup = </P>
<P CLASS="Indented">
<A NAME="pgfId-998342"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998343"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-998344"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998345"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998638"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998639"></A>Again, we will use the pffiles command to see the filenames contributing to this dbpf object:</P>
<P CLASS="Body">
<A NAME="pgfId-998643"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998349"></A>&gt;&gt; pffiles('aeic_rtsys')</P>
<P CLASS="Indented">
<A NAME="pgfId-998350"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998351"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998352"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998353"></A>    '/opt/antelope/4.2u/data/pf/site/aeic_rtsys.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-998354"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998355"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998644"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998645"></A>As an interlude to help the reader understand the following demonstration of parameter file commands, here is the aeic_rtsys.pf parameter file itself:</P>
<P CLASS="Body">
<A NAME="pgfId-998149"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998360"></A>nordic% cat /opt/antelope/4.2u/data/pf/site/aeic_rtsys.pf</P>
<P CLASS="Indented">
<A NAME="pgfId-998361"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998362"></A>primary_system op</P>
<P CLASS="Indented">
<A NAME="pgfId-998363"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998364"></A>processing_systems &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998365"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998366"></A>        op &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998367"></A>                system_name              Operation</P>
<P CLASS="Indented">
<A NAME="pgfId-998368"></A>                host                              earlybird</P>
<P CLASS="Indented">
<A NAME="pgfId-998369"></A>                site_database              /iwrun/op/params/Stations/worm</P>
<P CLASS="Indented">
<A NAME="pgfId-998370"></A>                archive_database        /iwrun/op/db/archive/archive</P>
<P CLASS="Indented">
<A NAME="pgfId-998371"></A>        }</P>
<P CLASS="Indented">
<A NAME="pgfId-998372"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998373"></A>        dev &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998374"></A>                system_name             Development</P>
<P CLASS="Indented">
<A NAME="pgfId-998375"></A>                host                             nordic</P>
<P CLASS="Indented">
<A NAME="pgfId-998376"></A>                site_database              /iwrun/dev/params/Stations/worm</P>
<P CLASS="Indented">
<A NAME="pgfId-998377"></A>                archive_database        /iwrun/dev/db/archive/archive</P>
<P CLASS="Indented">
<A NAME="pgfId-998378"></A>        }</P>
<P CLASS="Indented">
<A NAME="pgfId-998379"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998380"></A>        bak &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998381"></A>                system_name             Backup</P>
<P CLASS="Indented">
<A NAME="pgfId-998382"></A>                host                             ice</P>
<P CLASS="Indented">
<A NAME="pgfId-998383"></A>                site_database            /iwrun/bak/params/Stations/worm</P>
<P CLASS="Indented">
<A NAME="pgfId-998384"></A>                archive_database      /iwrun/bak/db/archive/archive</P>
<P CLASS="Indented">
<A NAME="pgfId-998385"></A>        }</P>
<P CLASS="Indented">
<A NAME="pgfId-998386"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-998387"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998388"></A>rtexec_run_dirs &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-998389"></A>        nordic              /iwrun/dev/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998390"></A>        earlybird         /iwrun/op/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998391"></A>        ice                   /iwrun/bak/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998392"></A>        fk                     /home/bbanddat/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998393"></A>        beam               /iwrun/acq/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998394"></A>        marvin             /home/uafarr/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998395"></A>        megathrust      /home/beeper/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998396"></A>        strike               /export/mitch/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998397"></A>        ugle                 /Seis/ugle1/run</P>
<P CLASS="Indented">
<A NAME="pgfId-998398"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-998399"></A>nordic%</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998358"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998646"></A>Again, the pfkeys command names the component parameters:</P>
<P CLASS="Body">
<A NAME="pgfId-998710"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998435"></A>&gt;&gt; pfkeys(setup)</P>
<P CLASS="Indented">
<A NAME="pgfId-998436"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998437"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998438"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998439"></A>    'primary_system'</P>
<P CLASS="Indented">
<A NAME="pgfId-998440"></A>    'processing_systems'</P>
<P CLASS="Indented">
<A NAME="pgfId-998441"></A>    'rtexec_run_dirs'</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998442"></A> &nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998647"></A>We will take three approaches to answering the question &quot;where is the primary acquisition system currently putting continuous waveform data.&quot; The first mechanism of asking this from the parameter file is deliberately long-winded, for instructional purposes:</P>
<P CLASS="Body">
<A NAME="pgfId-998648"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998443"></A>&gt;&gt; sys=pfget(setup,'processing_systems')</P>
<P CLASS="Indented">
<A NAME="pgfId-998444"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998445"></A>sys = </P>
<P CLASS="Indented">
<A NAME="pgfId-998446"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998447"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-998448"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998884"></A>&gt;&gt; pfkeys(sys)</P>
<P CLASS="Indented">
<A NAME="pgfId-998885"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998886"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998887"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998888"></A>    'bak'</P>
<P CLASS="Indented">
<A NAME="pgfId-998889"></A>    'dev'</P>
<P CLASS="Indented">
<A NAME="pgfId-998890"></A>    'op'</P>
<P CLASS="Indented">
<A NAME="pgfId-998891"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998892"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-998456"></A>&gt;&gt; op = pfget(sys,'op')</P>
<P CLASS="Indented">
<A NAME="pgfId-998457"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998458"></A>op = </P>
<P CLASS="Indented">
<A NAME="pgfId-998459"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998460"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-998461"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998462"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-998466"></A>&gt;&gt; pfkeys(op)</P>
<P CLASS="Indented">
<A NAME="pgfId-998467"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998468"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-998469"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998470"></A>    'archive_database'</P>
<P CLASS="Indented">
<A NAME="pgfId-998471"></A>    'host'</P>
<P CLASS="Indented">
<A NAME="pgfId-998472"></A>    'site_database'</P>
<P CLASS="Indented">
<A NAME="pgfId-998473"></A>    'system_name'</P>
<P CLASS="Indented">
<A NAME="pgfId-998474"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998475"></A>&gt;&gt; pfget_string(op,'archive_database')</P>
<P CLASS="Indented">
<A NAME="pgfId-998476"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998477"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998478"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998479"></A>/iwrun/op/db/archive/archive</P>
<P CLASS="Indented">
<A NAME="pgfId-998480"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998481"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998433"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998649"></A>Now let's speed that up a bit:</P>
<P CLASS="Body">
<A NAME="pgfId-998650"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998423"></A>&gt;&gt; nestedanswer = pf2struct(setup,'recursive');</P>
<P CLASS="Indented">
<A NAME="pgfId-998424"></A>&gt;&gt; nestedanswer.processing_systems.op.archive_database</P>
<P CLASS="Indented">
<A NAME="pgfId-998425"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998426"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998427"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998428"></A>/iwrun/op/db/archive/archive</P>
<P CLASS="Indented">
<A NAME="pgfId-998429"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998489"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998490"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998651"></A>In addition to the parameter-file reading interface described above, there is an alternative interface through the pfresolve command. This allows square-brackets in the parameter name to index list (Tbl) entries, and curly braces to index associative-array entries. We will combine these with a nested pfget inquiry to find the name of the primary system:</P>
<P CLASS="Body">
<A NAME="pgfId-998652"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998491"></A>&gt;&gt; name=[ 'processing_systems{' pfget(setup,'primary_system')  ...      '}{archive_database}'];</P>
<P CLASS="Indented">
<A NAME="pgfId-998412"></A>&gt;&gt; pfresolve(setup,name)</P>
<P CLASS="Indented">
<A NAME="pgfId-998413"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998414"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998415"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998416"></A>/iwrun/op/db/archive/archive</P>
<P CLASS="Indented">
<A NAME="pgfId-998417"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998418"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998653"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998654"></A>Note that this setup allows system maintainers to smoothly transition between operational and backup Antelope systems. By switching the primary system from Operation to Backup, operators can preserve continuous, transparent service to user processes while installing new disk drives etc.</P>
<P CLASS="Body">
<A NAME="pgfId-998655"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998899"></A>About this time, when one gets multiple dbpf objects constructed and needs to keep track of them, it is useful to be able to identify the type of each dbpf object. This is done with the pftype command:</P>
<P CLASS="Body">
<A NAME="pgfId-998904"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998907"></A>&gt;&gt; pftype(sys)</P>
<P CLASS="Indented">
<A NAME="pgfId-998908"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998909"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998910"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998911"></A>PFARR</P>
<P CLASS="Indented">
<A NAME="pgfId-998912"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998913"></A>&gt;&gt; pftype(setup)</P>
<P CLASS="Indented">
<A NAME="pgfId-998914"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998915"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998916"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998917"></A>PFFILE</P>
<P CLASS="Indented">
<A NAME="pgfId-998918"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998919"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998905"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998922"></A>Top-level dbpf objects will be of type PFFILE. Subsidiary arrays are indicated with PFARR. The names under which PFFILE-type dbpf objects  were launched may be obtained with the pfname command:</P>
<P CLASS="Body">
<A NAME="pgfId-998925"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998928"></A>&gt;&gt; pfname(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-998929"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998930"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998931"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998932"></A>test</P>
<P CLASS="Indented">
<A NAME="pgfId-998933"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998934"></A>&gt;&gt; pfname(setup)</P>
<P CLASS="Indented">
<A NAME="pgfId-998935"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998936"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-998937"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998938"></A>aeic_rtsys</P>
<P CLASS="Indented">
<A NAME="pgfId-998939"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-998940"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998926"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998903"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998656"></A>When one is done with a Matlab dbpf object, one can call pffree or clear() on it in order to remove the object. Note, however, that subsidiary parameter-file objects will no longer be useful once the parent is cleared, so it is important to get all the information one wants out of a parameter file object before freeing or clearing it. </P>
<P CLASS="Body">
<A NAME="pgfId-998657"></A> &nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-998495"></A>&gt;&gt; pffree(setup) </P>
<P CLASS="Indented">
<A NAME="pgfId-998500"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-998504"></A>&gt;&gt; clear(op)</P>
<P CLASS="Indented">
<A NAME="pgfId-998658"></A>&gt;&gt; clear(sys)</P>
<P CLASS="Indented">
<A NAME="pgfId-998501"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-998406"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997418"></A>Values may also be written to parameter files with the pfput series of command, or with the dbpf command used to compile strings into parameter files. This is explained in the documentation for the individual commands below. If a parameter file is changing from the outside as your Matlab program runs, the pfupdate command may be used to keep up with any changes to the parameter file. </P>
<P CLASS="Body">
<A NAME="pgfId-1002439"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1002440"></A>Advanced Example</H1>
<P CLASS="Body">
<A NAME="pgfId-997403"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997404"></A>Get 100 seconds of data that occurred 10 minutes ago on the network of stations at Shishaldin volcano:</P>
<P CLASS="Body">
<A NAME="pgfId-999080"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999083"></A>pf=dbpf('aeic_rtsys');</P>
<P CLASS="Indented">
<A NAME="pgfId-999084"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999085"></A>% Get the name of the current archive database from our local parameter file</P>
<P CLASS="Indented">
<A NAME="pgfId-999086"></A>primary = pfget(pf,'primary_system');</P>
<P CLASS="Indented">
<A NAME="pgfId-999087"></A>dbname = pfresolve(pf,['processing_systems{' primary '}{archive_database}']);</P>
<P CLASS="Indented">
<A NAME="pgfId-999088"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999089"></A>db = dbopen( dbname, 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-999090"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999091"></A>db = dblookup_table( db, 'affiliation' );</P>
<P CLASS="Indented">
<A NAME="pgfId-999092"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999093"></A>net = 'Shshldn';</P>
<P CLASS="Indented">
<A NAME="pgfId-999094"></A>db = dbsubset(db, ['net == &quot;' net '&quot;']);</P>
<P CLASS="Indented">
<A NAME="pgfId-999095"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999096"></A>dbw = dblookup_table( db, 'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-999097"></A>db=dbjoin(db, dbw);</P>
<P CLASS="Indented">
<A NAME="pgfId-999098"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999099"></A>% Get data from 10 minutes ago:</P>
<P CLASS="Indented">
<A NAME="pgfId-999100"></A>st = str2epoch('now') - 600;</P>
<P CLASS="Indented">
<A NAME="pgfId-999101"></A>et = st + 100;</P>
<P CLASS="Indented">
<A NAME="pgfId-999102"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999103"></A>tr = trload_css( db, st, et );</P>
<P CLASS="Indented">
<A NAME="pgfId-999104"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999105"></A>nrecs = dbquery( tr, 'dbRECORD_COUNT');</P>
<P CLASS="Indented">
<A NAME="pgfId-999106"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999107"></A>for i=1:nrecs,</P>
<P CLASS="Indented">
<A NAME="pgfId-999108"></A>        subplot( nrecs, 1, i )</P>
<P CLASS="Indented">
<A NAME="pgfId-999109"></A>        tr.record=i-1;</P>
<P CLASS="Indented">
<A NAME="pgfId-999110"></A>        data=trextract_data(tr);</P>
<P CLASS="Indented">
<A NAME="pgfId-999111"></A>        plot(data)</P>
<P CLASS="Indented">
<A NAME="pgfId-999112"></A>        ylabel(dbgetv(tr,'sta'));</P>
<P CLASS="Indented">
<A NAME="pgfId-999113"></A>end</P>
<P CLASS="Indented">
<A NAME="pgfId-999114"></A> &nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999115"></A>trdestroy( tr );</P>
<P CLASS="Indented">
<A NAME="pgfId-999116"></A>dbclose( db );</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999117"></A> &nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999132"></A>Channel names are not labelled. One station has three components, and another has both a vertical component and a pressure sensor, explaining the repetition of names in this figure.</P>
<P CLASS="Body">
<A NAME="pgfId-999124"></A>&nbsp;</P>
<DIV>
<IMG SRC="Antelope_Toolbox_for_Matlab-2.gif">
</DIV>
<P CLASS="Body">
<A NAME="pgfId-999021"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-999022"></A>Examples of each command</H1>
<P CLASS="Body">
<A NAME="pgfId-999344"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999687"></A>Many of these presume you have run the command dbexample_get_demodb_path, which sets the variable demodb_path to the name of a sample database. An attempt was made to make each of these examples self-sufficient. Hence there are usually a number of setup commands to make the example call possible. Some of the examples may be a bit contrived. Note that in practice, it is not necessary to keep reopening a database or a parameter-file object! The parameter-file routines use the dbloc2.pf and the rtexec.pf parameter files as examples. They should be available on any properly installed Antelope system. There are also Matlab .m files showing examples of each command in use. These example files should be in $ANTELOPE/data/matlab/antelope/examples on a properly configured system. For a list of available examples, type help antelope/examples.</P>
<P CLASS="Body">
<A NAME="pgfId-1004344"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1004345"></A>arrtimes</H1>
<P CLASS="Body">
<A NAME="pgfId-1004346"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004347"></A>The arrtimes command calculates the travel-times of all known seismic phases, given the distance delta in degrees to the earthquake and the depth of the earthquake in kilometers. The default travel-time model is IASPEI `91, however this may be modified with the TAUP_TABLE environment variable. The returned travel-time values are in seconds. In this example, we feed the result to strtdelta to produce a more readable result. </P>
<P CLASS="Body">
<A NAME="pgfId-1004406"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1004350"></A>&gt;&gt; delta = 20;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004353"></A>&gt;&gt; depth = 10;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004354"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004355"></A>&gt;&gt; [times, phasenames] = arrtimes( delta, depth );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004356"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004357"></A>&gt;&gt; [char(strtdelta(times)) char(phasenames)]</P>
<P CLASS="Indented">
<A NAME="pgfId-1004358"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004359"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1004360"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004361"></A>  4:33 minutes       P     </P>
<P CLASS="Indented">
<A NAME="pgfId-1004362"></A>  4:34 minutes       Pn    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004363"></A>  4:36 minutes       pP    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004364"></A>  4:37 minutes       sP    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004365"></A>  4:37 minutes       pPn   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004366"></A>  4:38 minutes       P     </P>
<P CLASS="Indented">
<A NAME="pgfId-1004367"></A>  4:39 minutes       sPn   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004368"></A>  4:41 minutes       pP    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004369"></A>  4:42 minutes       sP    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004370"></A>  4:49 minutes       PnPn  </P>
<P CLASS="Indented">
<A NAME="pgfId-1004372"></A>  8:18 minutes       S     </P>
<P CLASS="Indented">
<A NAME="pgfId-1004373"></A>  8:20 minutes       Sn    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004374"></A>  8:20 minutes       S     </P>
<P CLASS="Indented">
<A NAME="pgfId-1004375"></A>  8:21 minutes       S     </P>
<P CLASS="Indented">
<A NAME="pgfId-1004376"></A>  8:23 minutes       sS    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004377"></A>  8:24 minutes       sSn   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004378"></A>  8:25 minutes       sS    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004379"></A>  8:25 minutes       sS    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004380"></A>  8:27 minutes       S     </P>
<P CLASS="Indented">
<A NAME="pgfId-1004381"></A>  8:30 minutes       pS    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004382"></A>  8:32 minutes       sS    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004383"></A>  8:36 minutes       SnSn  </P>
<P CLASS="Indented">
<A NAME="pgfId-1004384"></A>  8:48 minutes       PcP   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004385"></A> 12:25 minutes       ScP   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004386"></A> 12:26 minutes       PcS   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004387"></A> 16:07 minutes       ScS   </P>
<P CLASS="Indented">
<A NAME="pgfId-1004388"></A> 16:37 minutes       PKiKP </P>
<P CLASS="Indented">
<A NAME="pgfId-1004389"></A> 16:41 minutes       pPKiKP</P>
<P CLASS="Indented">
<A NAME="pgfId-1004390"></A> 16:42 minutes       sPKiKP</P>
<P CLASS="Indented">
<A NAME="pgfId-1004391"></A> 20:08 minutes       SKiKP </P>
<P CLASS="Indented">
<A NAME="pgfId-1004397"></A> 31:47 minutes       PKKPdf</P>
<P CLASS="Indented">
<A NAME="pgfId-1004398"></A> 35:18 minutes       SKKPdf</P>
<P CLASS="Indented">
<A NAME="pgfId-1004399"></A> 35:19 minutes       PKKSdf</P>
<P CLASS="Indented">
<A NAME="pgfId-1004400"></A> 38:50 minutes       SKKSdf</P>
<P CLASS="Indented">
<A NAME="pgfId-1004401"></A> 40:17 minutes       P'P'df</P>
<P CLASS="Indented">
<A NAME="pgfId-1004402"></A> 42:47 minutes       P'P'ab</P>
<P CLASS="Indented">
<A NAME="pgfId-1004403"></A> 54:25 minutes       S'S'df</P>
<P CLASS="Indented">
<A NAME="pgfId-1004404"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004405"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1004351"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999688"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999366"></A>clear_register</H1>
<P CLASS="Body">
<A NAME="pgfId-999613"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003153"></A>Most of the toolbox routines are pretty good about complaining of problems when they occur. However, if you suspect the package is caching a useful error message, this is the way to bring them to the surface.</P>
<P CLASS="Body">
<A NAME="pgfId-1003154"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999636"></A>&gt;&gt; clear_register('print')</P>
<P CLASS="Indented">
<A NAME="pgfId-999637"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001263"></A>&gt;&gt; % [...if there were error messages accumulated, this would have flushed them out...]</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999614"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999367"></A>db2struct</H1>
<P CLASS="Body">
<A NAME="pgfId-999440"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003155"></A>This is probably one of the more useful commands in the toolbox. It can operate on a database table or on a view that contains only one table (for example, it will work on a view showing a subset of the origin table, but not a view that was made by joining the origin and assoc tables). </P>
<P CLASS="Body">
<A NAME="pgfId-1003156"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000151"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000152"></A>&gt;&gt; db = dblookup_table( db, 'origin' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1000153"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001940"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001941"></A>&gt;&gt; % Example 1:</P>
<P CLASS="Indented">
<A NAME="pgfId-1000157"></A>&gt;&gt; db2struct(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000158"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000159"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000160"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000161"></A>          lat: 40.0740</P>
<P CLASS="Indented">
<A NAME="pgfId-1000162"></A>          lon: 69.1640</P>
<P CLASS="Indented">
<A NAME="pgfId-1000163"></A>        depth: 155.1660</P>
<P CLASS="Indented">
<A NAME="pgfId-1000164"></A>         time: 7.0437e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000165"></A>         orid: 1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000166"></A>         evid: -1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000167"></A>        jdate: 1992118</P>
<P CLASS="Indented">
<A NAME="pgfId-1000168"></A>         nass: 7</P>
<P CLASS="Indented">
<A NAME="pgfId-1000169"></A>         ndef: 7</P>
<P CLASS="Indented">
<A NAME="pgfId-1000170"></A>          ndp: -1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000171"></A>          grn: 715</P>
<P CLASS="Indented">
<A NAME="pgfId-1000172"></A>          srn: 48</P>
<P CLASS="Indented">
<A NAME="pgfId-1000173"></A>        etype: '-'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000174"></A>       review: ''</P>
<P CLASS="Indented">
<A NAME="pgfId-1000175"></A>        depdp: -999</P>
<P CLASS="Indented">
<A NAME="pgfId-1000176"></A>        dtype: 'f'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000177"></A>           mb: 2.6200</P>
<P CLASS="Indented">
<A NAME="pgfId-1000178"></A>         mbid: 1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000179"></A>           ms: -999</P>
<P CLASS="Indented">
<A NAME="pgfId-1000180"></A>         msid: -1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000181"></A>           ml: -999</P>
<P CLASS="Indented">
<A NAME="pgfId-1000182"></A>         mlid: -1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000183"></A>    algorithm: 'locsat:kyrghyz'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000184"></A>         auth: 'JSPC'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000185"></A>       commid: -1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000186"></A>       lddate: 790466871</P>
<P CLASS="Indented">
<A NAME="pgfId-1000187"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000195"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001944"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001945"></A>&gt;&gt; % Example 2:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001946"></A>&gt;&gt; db=dblookup(db,'','','','dbALL');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000204"></A>&gt;&gt; db2struct(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000205"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000206"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000207"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000208"></A>1x1351 struct array with fields:</P>
<P CLASS="Indented">
<A NAME="pgfId-1000209"></A>    lat</P>
<P CLASS="Indented">
<A NAME="pgfId-1000210"></A>    lon</P>
<P CLASS="Indented">
<A NAME="pgfId-1000211"></A>    depth</P>
<P CLASS="Indented">
<A NAME="pgfId-1000212"></A>    time</P>
<P CLASS="Indented">
<A NAME="pgfId-1000213"></A>    orid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000214"></A>    evid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000215"></A>    jdate</P>
<P CLASS="Indented">
<A NAME="pgfId-1000216"></A>    nass</P>
<P CLASS="Indented">
<A NAME="pgfId-1000217"></A>    ndef</P>
<P CLASS="Indented">
<A NAME="pgfId-1000218"></A>    ndp</P>
<P CLASS="Indented">
<A NAME="pgfId-1000219"></A>    grn</P>
<P CLASS="Indented">
<A NAME="pgfId-1000220"></A>    srn</P>
<P CLASS="Indented">
<A NAME="pgfId-1000221"></A>    etype</P>
<P CLASS="Indented">
<A NAME="pgfId-1000222"></A>    review</P>
<P CLASS="Indented">
<A NAME="pgfId-1000223"></A>    depdp</P>
<P CLASS="Indented">
<A NAME="pgfId-1000224"></A>    dtype</P>
<P CLASS="Indented">
<A NAME="pgfId-1000225"></A>    mb</P>
<P CLASS="Indented">
<A NAME="pgfId-1000226"></A>    mbid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000227"></A>    ms</P>
<P CLASS="Indented">
<A NAME="pgfId-1000228"></A>    msid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000229"></A>    ml</P>
<P CLASS="Indented">
<A NAME="pgfId-1000230"></A>    mlid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000231"></A>    algorithm</P>
<P CLASS="Indented">
<A NAME="pgfId-1000232"></A>    auth</P>
<P CLASS="Indented">
<A NAME="pgfId-1000233"></A>    commid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000234"></A>    lddate</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000235"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999441"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001947"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001948"></A>&gt;&gt; % Example 3:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001949"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000457"></A>&gt;&gt; db2struct(db,'lat','lon','depth','mb')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000458"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000459"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000460"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000461"></A>      lat: 40.0740</P>
<P CLASS="Indented">
<A NAME="pgfId-1000462"></A>      lon: 69.1640</P>
<P CLASS="Indented">
<A NAME="pgfId-1000463"></A>    depth: 155.1660</P>
<P CLASS="Indented">
<A NAME="pgfId-1000464"></A>       mb: 2.6200</P>
<P CLASS="Indented">
<A NAME="pgfId-1000465"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000466"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000455"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999442"></A>dbadd</H1>
<P CLASS="Body">
<A NAME="pgfId-999443"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003157"></A>The raw storage format of the Datascope files is fixed-format ASCII rows. Usually, interaction with the database tables is smoother if you avoid handling entire rows at once. However, there are occasions where it is useful to move an entire row around. dbadd adds an entire database row to the flat-file table at once. The database pointer for each table contains something called a `scratch' record for that table. The scratch record is an entire row that is in memory for the sole purpose of scribbling. In this example we add several values to the scratch row of the origin table, then write the scratch row to the database (i.e. in this example that means we've written the fixed-format ASCII row to the end of the file /tmp/newdb.origin).  </P>
<P CLASS="Body">
<A NAME="pgfId-1003158"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003159"></A>&gt;&gt;  db=dbopen('/tmp/newdb','r+');</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001516"></A>&gt;&gt; db=dblookup(db,'','origin','','dbSCRATCH');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001517"></A>&gt;&gt; dbputv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001518"></A>&gt;&gt; db.record=dbadd(db,'dbSCRATCH')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001519"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001520"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001521"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001522"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001523"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1001524"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001525"></A>      record: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001526"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001527"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999444"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999369"></A>dbadd_remark</H1>
<P CLASS="Body">
<A NAME="pgfId-999445"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003170"></A>The css3.0 schema, plus several other related schemas, have a separate table for comments. This table is infrequently used. The dbadd_remark and dbget_remark functions encapsulate the operations involved in adding a row to the remark table and linking it to a database row on another table such as the origin table.. </P>
<P CLASS="Body">
<A NAME="pgfId-1003175"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001363"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001364"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001365"></A>&gt;&gt; db.record =  dbaddnull(db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001366"></A>&gt;&gt; dbputv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')) </P>
<P CLASS="Indented">
<A NAME="pgfId-1001370"></A>&gt;&gt; dbadd_remark(db,'This earthquake occurred under Palmer, Alaska')</P>
<P CLASS="Indented">
<A NAME="pgfId-999446"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001374"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999370"></A>dbaddnull</H1>
<P CLASS="Body">
<A NAME="pgfId-999447"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003178"></A>Similar to dbadd, dbaddnull puts into a database table an entire fixed-format ASCII row, with format appropriate for that table. In this case all the fields of the new row are set to their null values.</P>
<P CLASS="Body">
<A NAME="pgfId-1003181"></A> &nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001310"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001311"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001324"></A>&gt;&gt; db.record =  dbaddnull(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001325"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001326"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001327"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001328"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001329"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1001330"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001331"></A>      record: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001332"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001333"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999448"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999449"></A>dbaddv</H1>
<P CLASS="Body">
<A NAME="pgfId-999450"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003182"></A>This is one of the most commonly used functions in the Datascope libraries. dbaddv adds a new fixed-format row to the specified table, setting all fields to their null values. It then modifies the specified fields to contain the more interesting values given in each key-value pair. dbaddv checks to make sure none of the primary keys match those for another row of the database, i.e. it takes some steps to keep you from corrupting your database. </P>
<P CLASS="Body">
<A NAME="pgfId-1003183"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001402"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001403"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001404"></A>&gt;&gt; db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001405"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001406"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001407"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001408"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001409"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1001410"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001411"></A>      record: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001412"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001413"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999451"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999372"></A>dbclose</H1>
<P CLASS="Body">
<A NAME="pgfId-999452"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003184"></A>This routine closes a database pointer, freeing all the associated resources (It does no harm to the underlying database files).</P>
<P CLASS="Body">
<A NAME="pgfId-1003185"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999724"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-999673"></A>&gt;&gt; dbclose(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-999674"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999453"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999373"></A>dbcrunch</H1>
<P CLASS="Body">
<A NAME="pgfId-999454"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003186"></A>Removing rows from a database is usually done in two steps. The first is to set all the fields of a row to their null values, but to leave the row in its place. This first step is performed by dbmark. The second stage, accomplished by the dbcrunch command, is to actually remove the null rows from the database table. This two-step procedure prevents skewing of all the record numbers for a table, often useful if the program is still working on the table.</P>
<P CLASS="Body">
<A NAME="pgfId-1003193"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003192"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001487"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001488"></A>&gt;&gt; % Add four copies of the same quake, all at slightly different times:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001489"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001956"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001491"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001492"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001493"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001494"></A>&gt;&gt; db.record=1;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001495"></A>&gt;&gt; dbmark(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001499"></A>&gt;&gt; dbcrunch(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001500"></A>&gt;&gt; dbquery(db,'dbRECORD_COUNT')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001501"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001502"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001503"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001504"></A>     3</P>
<P CLASS="Indented">
<A NAME="pgfId-1001505"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001506"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999455"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999374"></A>dbdelete</H1>
<P CLASS="Body">
<A NAME="pgfId-999456"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003194"></A>This command immediately deletes a row from a database table. </P>
<P CLASS="Body">
<A NAME="pgfId-1003195"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003196"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001537"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001538"></A>&gt;&gt; % Add four copies of the same quake, all at slightly different times:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001539"></A>&gt;&gt; db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001540"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001541"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001542"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001543"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001550"></A>&gt;&gt; dbquery(db,'dbRECORD_COUNT')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001551"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001552"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001553"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001554"></A>     4</P>
<P CLASS="Indented">
<A NAME="pgfId-1001555"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001556"></A>&gt;&gt; db.record=1;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001557"></A>&gt;&gt; dbdelete(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001558"></A>&gt;&gt; dbquery(db,'dbRECORD_COUNT')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001559"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001560"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001561"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001562"></A>     3</P>
<P CLASS="Indented">
<A NAME="pgfId-1001563"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001564"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999457"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999375"></A>dbeval</H1>
<P CLASS="Body">
<A NAME="pgfId-999458"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003197"></A>This command is a general-purpose calculator which has access to standard math commands, useful seismological functions such as travel-time calculators, and to all the fields of a database view which is fed to the command.</P>
<P CLASS="Body">
<A NAME="pgfId-1003198"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000470"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-999459"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000487"></A>&gt;&gt; dbs=dblookup_table(db,'site');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000496"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000494"></A>&gt;&gt; db=dbjoin(db,dbs);</P>
<P CLASS="Indented">
<A NAME="pgfId-1000503"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000510"></A>&gt;&gt; dbeval(db,'arrival(&quot;PKiKP&quot;)-time')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000511"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000512"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000513"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000514"></A>  982.2883</P>
<P CLASS="Indented">
<A NAME="pgfId-1000515"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000516"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000520"></A>&gt;&gt; dbeval(db,'distance(site.lat,site.lon,origin.lat,origin.lon)')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000521"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000522"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000523"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000524"></A>   27.4124</P>
<P CLASS="Indented">
<A NAME="pgfId-1000525"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000526"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000508"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000482"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1004130"></A>dbextfile</H1>
<P CLASS="Body">
<A NAME="pgfId-1004134"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004139"></A>In the css3.0 schema and related schemas, many times external files are referenced in tables by the two fields dir and dfile. The dbextfile command combines these two fields into a full pathname, resolving all relative pathnames into absolute pathnames as well as adjusting for the actual location of the database table. The dbextfile command requires the name of the base table from which the dir and dfile fields should come. (Note that in many cases, the simpler dbfilename command will suffice instead of dbextfile). </P>
<P CLASS="Body">
<A NAME="pgfId-1004140"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1004141"></A>&gt;&gt; db = dbopen( demodb_path,'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004143"></A>&gt;&gt; db = dblookup_table( db, 'wfdisc' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004145"></A>&gt;&gt; dbt = dblookup_table( db, 'sensor' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004146"></A>&gt;&gt; db = dbjoin( db, dbt );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004168"></A>&gt;&gt; dbt = dblookup_table( db,'instrument' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004149"></A>&gt;&gt; db = dbjoin( db, dbt );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004150"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004131"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004152"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004153"></A>&gt;&gt; dbextfile( db, 'instrument' )                    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004154"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004155"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1004156"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004157"></A>/usr/local/matlab/toolbox/antelope/examples/demodb/response/sts2_vel_RT72A.1</P>
<P CLASS="Indented">
<A NAME="pgfId-1004158"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004159"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004160"></A>&gt;&gt; dbextfile( db, 'wfdisc' )                    </P>
<P CLASS="Indented">
<A NAME="pgfId-1004161"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004162"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1004163"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004164"></A>/usr/local/matlab/toolbox/antelope/examples/demodb/wf/knetc/1992/138/210426/19921382155.15.CHM.BHZ</P>
<P CLASS="Indented">
<A NAME="pgfId-1004169"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004170"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1004165"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004132"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999376"></A>dbfilename</H1>
<P CLASS="Body">
<A NAME="pgfId-999464"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003201"></A>In the css3.0 schema and related schemas, many times external files are referenced in tables by the two fields dir and dfile. The dbfilename command combines these two fields into a full pathname, resolving all relative pathnames into absolute pathnames as well as adjusting for the actual location of the database table. </P>
<P CLASS="Body">
<A NAME="pgfId-1003202"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000421"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000425"></A>&gt;&gt; dblookup_table(db,'instrument');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000428"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000435"></A>&gt;&gt; dbfilename(db)                    </P>
<P CLASS="Indented">
<A NAME="pgfId-1000436"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000437"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000438"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000439"></A>/opt/antelope/4.2u/data/matlab/antelope/examples/demodb/response/sts2_vel_RT72A.1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000440"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000441"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000433"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999465"></A>Note that if more than one table with external file references is present in the input view, only the first one will be chosen and returned. This may not always be the intended filename. For cases where the dir and dfile fields appear multiple times in the input view, use dbextfile instead of dbfilename. </P>
<P CLASS="Body">
<A NAME="pgfId-1004129"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999377"></A>dbfind</H1>
<P CLASS="Body">
<A NAME="pgfId-999466"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003203"></A>This command is a general-purpose utility to hunt through a database table or view for a record matching a specific criterion. Useful features include the ability to skip the first few matches, or to search backwards through the view.</P>
<P CLASS="Body">
<A NAME="pgfId-1003204"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000798"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000799"></A>&gt;&gt; db = dblookup_table( db, 'origin' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1000803"></A>&gt;&gt; db.record = dbfind(db,'mb&gt;6',0)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000804"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000805"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000806"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000807"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000808"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1000809"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000810"></A>      record: 80</P>
<P CLASS="Indented">
<A NAME="pgfId-1000811"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000812"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000816"></A>&gt;&gt; db.record = dbfind(db,'mb&gt;6',0,3)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000817"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000818"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000819"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000820"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000821"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1000822"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000823"></A>      record: 266</P>
<P CLASS="Indented">
<A NAME="pgfId-1000824"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000825"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000833"></A>&gt;&gt; db.record = dbfind(db,'mb&gt;6','backwards')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000834"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000835"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000836"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000837"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000838"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1000839"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000840"></A>      record: 1262</P>
<P CLASS="Indented">
<A NAME="pgfId-1000841"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000842"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000846"></A>&gt;&gt; dbgetv(db,'mb') </P>
<P CLASS="Indented">
<A NAME="pgfId-1000847"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000848"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000849"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000850"></A>    6.1400</P>
<P CLASS="Indented">
<A NAME="pgfId-1000851"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000852"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999467"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1004171"></A>dbfree</H1>
<P CLASS="Body">
<A NAME="pgfId-1004172"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004176"></A>This command frees up the resources allocated when a new view is created. The input database pointer must identify a single table, that is db.table and db.database should be valid. Generally, it is only necessary to explicitly free database views when they are very large or many of them are made within the same program. </P>
<P CLASS="Body">
<A NAME="pgfId-1004173"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1004190"></A>&gt;&gt; db = dbopen( demodb_path,'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004217"></A>&gt;&gt; dbarrival = dblookup_table( db,'arrival' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004194"></A>&gt;&gt; % Make a temporary view</P>
<P CLASS="Indented">
<A NAME="pgfId-1004224"></A>&gt;&gt; dbtemp = dbsubset( dbarrival, 'sta == &quot;AAK&quot;' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004196"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004197"></A>&gt;&gt; % Get something out of the temporary view</P>
<P CLASS="Indented">
<A NAME="pgfId-1004198"></A>&gt;&gt; dbgetv( dbtemp, 'deltim' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1004199"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004200"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1004201"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004202"></A>    0.0980</P>
<P CLASS="Indented">
<A NAME="pgfId-1004203"></A>    2.1640</P>
<P CLASS="Indented">
<A NAME="pgfId-1004204"></A>    2.2220</P>
<P CLASS="Indented">
<A NAME="pgfId-1004205"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004207"></A>&gt;&gt; % Free resources associated with the temporary view</P>
<P CLASS="Indented">
<A NAME="pgfId-1004208"></A>&gt;&gt; dbfree( dbtemp );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004228"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1004174"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999378"></A>dbget</H1>
<P CLASS="Body">
<A NAME="pgfId-999476"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003205"></A>As explained for the dbadd command, the underlying storage of database tables is as fixed-format ASCII rows. The dbget command can be used to retrieve an entire database row as a string (in fact, it is much more general, allowing the retrieval of entire tables or just specific fields depending on the value of the database pointer). Rather than trying to parse the output of dbget, use dbgetv to find specific pieces of information in a table or database row.</P>
<P CLASS="Body">
<A NAME="pgfId-1003206"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999690"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-999691"></A>&gt;&gt; db = dblookup_table( db, 'origin' );</P>
<P CLASS="Indented">
<A NAME="pgfId-999477"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-999697"></A>&gt;&gt; dbget(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-999698"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999699"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999700"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999701"></A>  40.0740   69.1640  155.1660   704371900.66886        1       -1  1992118    7    7   -1      715       48 -       -999.0000 f    2.62        1 -999.00       -1 -999.00       -1 locsat:kyrghyz  JSPC                  -1   790466871.00000</P>
<P CLASS="Indented">
<A NAME="pgfId-999702"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999703"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999704"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999695"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999478"></A>dbget_remark</H1>
<P CLASS="Body">
<A NAME="pgfId-999479"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003207"></A>As explained under dbadd_remark, dbget_remark eases the retrieval of comments in databases with the css3.0 remark table.</P>
<P CLASS="Body">
<A NAME="pgfId-1003212"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001376"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001377"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001378"></A>&gt;&gt; db.record =  dbaddnull(db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001379"></A>&gt;&gt; dbputv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')) </P>
<P CLASS="Indented">
<A NAME="pgfId-1001380"></A>&gt;&gt; dbadd_remark(db,'This earthquake occurred under Palmer, Alaska')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001388"></A>&gt;&gt; dbget_remark(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001389"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001390"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001391"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001392"></A>This earthquake occurred under Palmer, Alaska</P>
<P CLASS="Indented">
<A NAME="pgfId-1001393"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001394"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001400"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999380"></A>dbgetv</H1>
<P CLASS="Body">
<A NAME="pgfId-999481"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003213"></A>The dbgetv command is one of the most frequently used commands in the Antelope programming environment. With dbgetv one can get specific fields out of a database row. A unique characteristic of the Matlab-interface dbgetv command is the ability to extract entire columns at once out of a database table. </P>
<P CLASS="Body">
<A NAME="pgfId-1003214"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000245"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000246"></A>&gt;&gt; db = dblookup_table( db, 'origin' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1000247"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000251"></A>&gt;&gt; [lat,lon,auth] = dbgetv(db,'lat','lon','auth')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000252"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000253"></A>lat =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000254"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000255"></A>   40.0740</P>
<P CLASS="Indented">
<A NAME="pgfId-1000256"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000257"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000258"></A>lon =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000259"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000260"></A>   69.1640</P>
<P CLASS="Indented">
<A NAME="pgfId-1000261"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000262"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000263"></A>auth =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000264"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000265"></A>JSPC</P>
<P CLASS="Indented">
<A NAME="pgfId-1000266"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000267"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000271"></A>&gt;&gt; db = dbsubset(db,'mb&gt;6');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000275"></A>&gt;&gt; dbgetv(db,'mb')  </P>
<P CLASS="Indented">
<A NAME="pgfId-1000276"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000277"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000278"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000279"></A>    6.4200</P>
<P CLASS="Indented">
<A NAME="pgfId-1000280"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000281"></A>    6.2000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000282"></A>    6.2000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000283"></A>    6.2300</P>
<P CLASS="Indented">
<A NAME="pgfId-1000284"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000285"></A>    6.3100</P>
<P CLASS="Indented">
<A NAME="pgfId-1000286"></A>    6.0200</P>
<P CLASS="Indented">
<A NAME="pgfId-1000287"></A>    6.2800</P>
<P CLASS="Indented">
<A NAME="pgfId-1000288"></A>    6.5000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000289"></A>    6.5700</P>
<P CLASS="Indented">
<A NAME="pgfId-1000290"></A>    6.1100</P>
<P CLASS="Indented">
<A NAME="pgfId-1000291"></A>    6.0500</P>
<P CLASS="Indented">
<A NAME="pgfId-1000292"></A>    6.2100</P>
<P CLASS="Indented">
<A NAME="pgfId-1000293"></A>    6.3000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000294"></A>    6.3000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000295"></A>    6.2700</P>
<P CLASS="Indented">
<A NAME="pgfId-1000296"></A>    6.1400</P>
<P CLASS="Indented">
<A NAME="pgfId-1000297"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000298"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999482"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999381"></A>dbinvalid</H1>
<P CLASS="Body">
<A NAME="pgfId-999611"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003215"></A>The database-pointer is actually a structure of four integers. There is an `invalid' value for all of these which is occasionally useful for tests or as the input to some commands.</P>
<P CLASS="Body">
<A NAME="pgfId-1003216"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999645"></A>&gt;&gt; db = dbinvalid</P>
<P CLASS="Indented">
<A NAME="pgfId-999646"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999647"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-999648"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999649"></A>    database: -102</P>
<P CLASS="Indented">
<A NAME="pgfId-999650"></A>       table: -102</P>
<P CLASS="Indented">
<A NAME="pgfId-999651"></A>       field: -102</P>
<P CLASS="Indented">
<A NAME="pgfId-999652"></A>      record: -102</P>
<P CLASS="Indented">
<A NAME="pgfId-999653"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999654"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999612"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999382"></A>dbjoin</H1>
<P CLASS="Body">
<A NAME="pgfId-999609"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003217"></A>dbjoin allows the user to construct composite views in a relational database. Information in each table is cross-referenced according to its primary fields to construct a set of the corresponding, joined rows. </P>
<P CLASS="Body">
<A NAME="pgfId-1003220"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000566"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000567"></A>&gt;&gt; dbarrival=dblookup_table(db,'arrival');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000568"></A>&gt;&gt; dbwfdisc=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000572"></A>&gt;&gt; db=dbjoin(dbarrival,dbwfdisc)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000573"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000574"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000575"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000576"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000577"></A>       table: 34</P>
<P CLASS="Indented">
<A NAME="pgfId-1000578"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000579"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000580"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000581"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999610"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999383"></A>dbjoin_keys</H1>
<P CLASS="Body">
<A NAME="pgfId-999607"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003221"></A>The standard Datascope join operations between database tables are accomplished by inferring the sensible join keys with which to combine the two tables. dbjoin_keys explains which fields were used or will be used to perform a join. </P>
<P CLASS="Body">
<A NAME="pgfId-1003222"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999608"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000533"></A>&gt;&gt; dbarrival=dblookup_table(db,'arrival');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000538"></A>&gt;&gt; dbwfdisc=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001950"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001951"></A>&gt;&gt; % Example 1:</P>
<P CLASS="Indented">
<A NAME="pgfId-1000545"></A>&gt;&gt; dbjoin_keys(dbarrival,dbwfdisc)       </P>
<P CLASS="Indented">
<A NAME="pgfId-1000546"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000547"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000548"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000549"></A>    'sta'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000550"></A>    'time == time::endtime'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000551"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000552"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001952"></A>&gt;&gt; % Example 2:</P>
<P CLASS="Indented">
<A NAME="pgfId-1000556"></A>&gt;&gt; dbjoin_keys(db,'origin','assoc')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000557"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000558"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000559"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000560"></A>    'orid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000561"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000562"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000543"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999384"></A>dblookup</H1>
<P CLASS="Body">
<A NAME="pgfId-999605"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003223"></A>The four-element dbpointer structure, used as a handle to reference different fields or sections of a relational database, is rarely modified by hand. dblookup allows the four elements of the dbpointer structure to be aimed based on human-readable names for the tables and fields. Additionally, several recognized constants such as `dbALL' and `dbSCRATCH' allow further control of the parts of the database to which dblookup aims the database pointer. </P>
<P CLASS="Body">
<A NAME="pgfId-1003224"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000404"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000408"></A>&gt;&gt; dblookup(db,'','origin','','dbALL')      </P>
<P CLASS="Indented">
<A NAME="pgfId-1000409"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000410"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000411"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000412"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000413"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1000414"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000415"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000416"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000417"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999606"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999385"></A>dblookup_table</H1>
<P CLASS="Body">
<A NAME="pgfId-999603"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003225"></A>One of the most common operations with dblookup is to aim the database pointer at a particular table. dblookup_table is an easier-to-type shorthand for this operation.</P>
<P CLASS="Body">
<A NAME="pgfId-1003226"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000325"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000326"></A>&gt;&gt; db = dblookup_table(db,'origin')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000327"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000328"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000329"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000330"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000331"></A>       table: 10</P>
<P CLASS="Indented">
<A NAME="pgfId-1000332"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000333"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000334"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000335"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999604"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999386"></A>dbmark</H1>
<P CLASS="Body">
<A NAME="pgfId-999601"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003227"></A>This command is the first stage of a two-part process to remove a row from a database table, as explained under dbcrunch. For the impatient, see dbdelete.</P>
<P CLASS="Body">
<A NAME="pgfId-1003228"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001417"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001418"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001471"></A>&gt;&gt; % Add four copies of the same quake, all at slightly different times:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001419"></A>&gt;&gt; db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001428"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001437"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001446"></A>&gt;&gt;db.record=dbaddv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now'));</P>
<P CLASS="Indented">
<A NAME="pgfId-1001455"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-999602"></A>&gt;&gt; db.record=1;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001480"></A>&gt;&gt; dbmark(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001481"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001478"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999387"></A>dbnextid</H1>
<P CLASS="Body">
<A NAME="pgfId-999599"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003229"></A>In several of the css3.0-style database tables, entries such as hypocentral solutions (&quot;origin&quot; table) or seismic phase arrivals (&quot;arrival&quot; table) are identified with unique, integer id's. The dbnextid command allows the retrieval of the next unused value for any of these integer indices.</P>
<P CLASS="Body">
<A NAME="pgfId-1003230"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1001347"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Body">
<A NAME="pgfId-1001337"></A>&gt;&gt; dbnextid(db,'orid') </P>
<P CLASS="Body">
<A NAME="pgfId-1001338"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1001339"></A>ans =</P>
<P CLASS="Body">
<A NAME="pgfId-1001340"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1001341"></A>     1</P>
<P CLASS="Body">
<A NAME="pgfId-1001342"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1001343"></A>&gt;&gt; </P>
<P CLASS="Body">
<A NAME="pgfId-999600"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999388"></A>dbnojoin</H1>
<P CLASS="Body">
<A NAME="pgfId-999597"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003231"></A>Similar to dbjoin, the dbnojoin command returns a view showing rows in the first table that have no counterpart in the second.</P>
<P CLASS="Body">
<A NAME="pgfId-1003232"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000696"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000697"></A>&gt;&gt; dbarrival=dblookup_table(db,'arrival');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000698"></A>&gt;&gt; dbwfdisc=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000683"></A>&gt;&gt; db=dbnojoin(dbarrival,dbwfdisc)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000684"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000685"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000686"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000687"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000688"></A>       table: 36</P>
<P CLASS="Indented">
<A NAME="pgfId-1000689"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000690"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000702"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000703"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000707"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1000704"></A>dbopen</H1>
<P CLASS="Body">
<A NAME="pgfId-999595"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003233"></A>The first step in using Datascope on a relational database is to create a `handle', called a database pointer, to the ASCII flat files which store the database contents. This step is performed by dbopen. Here we have written a small routine to reliably provide the pathname of a sample database for these examples. </P>
<P CLASS="Body">
<A NAME="pgfId-1003234"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999658"></A>&gt;&gt; dbexample_get_demodb_path</P>
<P CLASS="Indented">
<A NAME="pgfId-999680"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999681"></A>demodb_path =</P>
<P CLASS="Indented">
<A NAME="pgfId-999682"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999683"></A>/opt/antelope/4.2u/data/matlab/antelope/examples/demodb/demo</P>
<P CLASS="Indented">
<A NAME="pgfId-999684"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999660"></A>&gt;&gt; db = dbopen(demodb_path,'r')</P>
<P CLASS="Indented">
<A NAME="pgfId-999661"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999662"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-999663"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999664"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-999665"></A>       table: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-999666"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-999667"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-999668"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999669"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999596"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999390"></A>dbpf</H1>
<P CLASS="Body">
<A NAME="pgfId-999593"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003235"></A>Many programs require some form of parameter file to store information about run-time configuration. The Antelope parameter-file utility provides a very powerful mechanism to handle such input files, including boolean, string, and numeric values as well as tables or key-value arrays, all of which can be nested. In the Antelope Toolbox for Matlab, interaction with a parameter file is through a `handle' called a dbpf object. See the Antelope documentation for more details on the parameter file mechanism.</P>
<P CLASS="Body">
<A NAME="pgfId-1003240"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999714"></A>&gt;&gt; pf = dbpf( 'dbloc2' )</P>
<P CLASS="Indented">
<A NAME="pgfId-999715"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999716"></A>pf = </P>
<P CLASS="Indented">
<A NAME="pgfId-999717"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999718"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-999719"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999720"></A>&gt;&gt; % Now as a contrived example of the other methods of use, </P>
<P CLASS="Indented">
<A NAME="pgfId-1002407"></A>&gt;&gt; % convert it to a string, then compile it into a new parameter-file object:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002367"></A>&gt;&gt; string_version = pf2string( pf );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002369"></A>&gt;&gt; % Create an empty parameter-file object:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002398"></A>&gt;&gt; newpf = dbpf</P>
<P CLASS="Indented">
<A NAME="pgfId-1002374"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002375"></A>newpf = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002376"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002377"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-1002378"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002397"></A>&gt;&gt; % Compile the new string into the empty parameter-file object:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002403"></A>&gt;&gt; % (you can compile into parameter-file objects that aren't empty as well)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002372"></A>&gt;&gt; newpf = dbpf( newpf, string_version) </P>
<P CLASS="Indented">
<A NAME="pgfId-1002383"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002384"></A>newpf = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002385"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002386"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-1002387"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002393"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999594"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1004229"></A>dbprocess</H1>
<P CLASS="Body">
<A NAME="pgfId-1004232"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004238"></A>Dbprocess provides a simplified interface for forming various views. When a sequence of standard database operations (such as subsets, joins, sorts, etc.) need to be performed all in a row, they can be combined into a single block, passed as a list of statements to dbprocess. </P>
<P CLASS="Body">
<A NAME="pgfId-1004231"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1004244"></A>&gt;&gt; db = dbopen( demodb_path,'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004247"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004248"></A>&gt;&gt; db = dbprocess( db, { 'dbopen arrival'; </P>
<P CLASS="Indented">
<A NAME="pgfId-1004295"></A>                                            'dbsubset sta == &quot;AAK&quot;'; </P>
<P CLASS="Indented">
<A NAME="pgfId-1004296"></A>                                            'dbjoin assoc' } );</P>
<P CLASS="Indented">
<A NAME="pgfId-1004249"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004250"></A>&gt;&gt; [iphase, delta] = dbgetv( db,'iphase', 'timeres' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1004251"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004252"></A>iphase = </P>
<P CLASS="Indented">
<A NAME="pgfId-1004253"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004254"></A>    'P'</P>
<P CLASS="Indented">
<A NAME="pgfId-1004255"></A>    'S'</P>
<P CLASS="Indented">
<A NAME="pgfId-1004256"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004257"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004258"></A>delta =</P>
<P CLASS="Indented">
<A NAME="pgfId-1004259"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004260"></A>   -0.0500</P>
<P CLASS="Indented">
<A NAME="pgfId-1004261"></A>    0.8600</P>
<P CLASS="Indented">
<A NAME="pgfId-1004262"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004263"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1004264"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1004245"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004288"></A>Detailed explanations of the valid statements available in dbprocess may be found in the unix man-pages for the dbprocess command. For reference, a summary list is provided here:</P>
<P CLASS="Body">
<A NAME="pgfId-1004291"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004268"></A>        dbopen table</P>
<P CLASS="Body">
<A NAME="pgfId-1004271"></A>        dbjoin [-o] table [ key key  ..]</P>
<P CLASS="Body">
<A NAME="pgfId-1004272"></A>        dbgroup key [ key  ..]</P>
<P CLASS="Body">
<A NAME="pgfId-1004273"></A>        dbleftjoin [-o] table [ key key  ..]</P>
<P CLASS="Body">
<A NAME="pgfId-1004274"></A>        dbnojoin table [ key key  ..]</P>
<P CLASS="Body">
<A NAME="pgfId-1004275"></A>        dbselect expr [expr ...]</P>
<P CLASS="Body">
<A NAME="pgfId-1004276"></A>        dbseparate table</P>
<P CLASS="Body">
<A NAME="pgfId-1004277"></A>        dbsever table</P>
<P CLASS="Body">
<A NAME="pgfId-1004278"></A>        dbsort [-ru] key .. ]</P>
<P CLASS="Body">
<A NAME="pgfId-1004279"></A>        dbsubset expression</P>
<P CLASS="Body">
<A NAME="pgfId-1004280"></A>        dbtheta table [ expression ..]</P>
<P CLASS="Body">
<A NAME="pgfId-1004281"></A>        dbungroup</P>
<P CLASS="Body">
<A NAME="pgfId-1004282"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1004269"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999391"></A>dbput</H1>
<P CLASS="Body">
<A NAME="pgfId-999591"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003241"></A>This function is similar to dbput, however it does not automatically add its own null row. Also, it does not do any consistency checking to make sure the new row makes sense given the contents of the rest of the table. Again, avoid working with entire rows at once unless necessary. Consider using dbputv if possible. </P>
<P CLASS="Body">
<A NAME="pgfId-1003242"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001572"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001573"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001574"></A>&gt;&gt; db.record =  dbaddnull(db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001575"></A>&gt;&gt; dbputv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')) </P>
<P CLASS="Indented">
<A NAME="pgfId-1001579"></A>&gt;&gt; record = dbget(db)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001580"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001581"></A>record =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001582"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001583"></A>  61.5922 -149.1300   20.0000   923760231.63253       -1       -1       -1   -1   -1   -1       -1       -1 -  -    -999.0000 - -999.00       -1 -999.00       -1 -999.00       -1 -               -                     -1   923760231.66952</P>
<P CLASS="Indented">
<A NAME="pgfId-1001584"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001585"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999592"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001595"></A>&gt;&gt; db.record =  dbaddnull(db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001599"></A>&gt;&gt; dbput(db,record)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001593"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001602"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999392"></A>dbputv</H1>
<P CLASS="Body">
<A NAME="pgfId-999589"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003243"></A>The dbputv command is used to put individual field values into a database row. This is an extremely important command in the Datascope library. Here, we make a new row with the dbaddnull command so we have somewhere to put our values. </P>
<P CLASS="Body">
<A NAME="pgfId-1003244"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001351"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001352"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-999590"></A>&gt;&gt; db.record =  dbaddnull(db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001358"></A>&gt;&gt; dbputv(db,'lat',61.5922,'lon',-149.130,'depth',20,'time',str2epoch('now')) </P>
<P CLASS="Indented">
<A NAME="pgfId-1001359"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001356"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999393"></A>dbquery</H1>
<P CLASS="Body">
<A NAME="pgfId-999586"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003245"></A>The dbquery command is used to request a wide variety of information about a database or one of its component parts. One of the most common uses is to count the number of records in a a table.</P>
<P CLASS="Body">
<A NAME="pgfId-1003246"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000339"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-999587"></A>&gt;&gt; db = dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000345"></A>&gt;&gt; dbquery(db,'dbRECORD_COUNT')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000346"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000347"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000348"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000349"></A>        1351</P>
<P CLASS="Indented">
<A NAME="pgfId-1000350"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000351"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000355"></A>&gt;&gt; dbquery(db,'dbTABLE_FIELDS')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000356"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000357"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000358"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000359"></A>    'lat'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000360"></A>    'lon'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000361"></A>    'depth'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000362"></A>    'time'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000363"></A>    'orid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000364"></A>    'evid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000365"></A>    'jdate'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000366"></A>    'nass'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000367"></A>    'ndef'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000368"></A>    'ndp'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000369"></A>    'grn'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000370"></A>    'srn'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000371"></A>    'etype'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000372"></A>    'review'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000373"></A>    'depdp'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000374"></A>    'dtype'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000375"></A>    'mb'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000376"></A>    'mbid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000377"></A>    'ms'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000378"></A>    'msid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000379"></A>    'ml'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000380"></A>    'mlid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000381"></A>    'algorithm'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000382"></A>    'auth'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000383"></A>    'commid'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000384"></A>    'lddate'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000385"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000386"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000394"></A>&gt;&gt; dbquery(db,'dbDATABASE_NAME')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000395"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000396"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000397"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000398"></A>/opt/antelope/4.2u/data/matlab/antelope/examples/demodb/demo</P>
<P CLASS="Indented">
<A NAME="pgfId-1000399"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000400"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000343"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999588"></A>dbresponse</H1>
<P CLASS="Body">
<A NAME="pgfId-999584"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003247"></A>The css3.0 schemas and related schemas reference instrument response information in separate files. These response files allow poles-and-zeros format, frequency-amplitude-phase triplet format, FIR format, and more. The dbresponse object is a handle to one of these response files, from which response information can be extracted. </P>
<P CLASS="Body">
<A NAME="pgfId-1003250"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001166"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001170"></A>&gt;&gt; db=dblookup_table(db,'instrument');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001175"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001179"></A>&gt;&gt; file=dbfilename(db) </P>
<P CLASS="Indented">
<A NAME="pgfId-1001180"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001181"></A>file =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001182"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001183"></A>/opt/antelope/4.2u/data/matlab/antelope/examples/demodb/response/sts2_vel_RT72A.1</P>
<P CLASS="Indented">
<A NAME="pgfId-1001184"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001185"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001189"></A>&gt;&gt; resp = dbresponse(file)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001190"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001191"></A>resp = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001192"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001193"></A>        dbresponse object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-1001194"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001195"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001173"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999585"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999395"></A>dbsort</H1>
<P CLASS="Body">
<A NAME="pgfId-999582"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003251"></A>This command takes any database view and returns a view sorted according to the specified expression.</P>
<P CLASS="Body">
<A NAME="pgfId-1003252"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000737"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000732"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000742"></A>&gt;&gt; db=dbsubset(db,'mb&gt;6.3');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000763"></A>&gt;&gt; db=dbsort(db,'mb');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000773"></A>&gt;&gt; dbgetv(db,'mb')   </P>
<P CLASS="Indented">
<A NAME="pgfId-1000774"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000775"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000776"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000777"></A>    6.3100</P>
<P CLASS="Indented">
<A NAME="pgfId-1000778"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000779"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000780"></A>    6.4200</P>
<P CLASS="Indented">
<A NAME="pgfId-1000781"></A>    6.5000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000782"></A>    6.5700</P>
<P CLASS="Indented">
<A NAME="pgfId-1000783"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000784"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000771"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999396"></A>dbsubset</H1>
<P CLASS="Body">
<A NAME="pgfId-999576"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003255"></A>This command, fairly self-explanatory, returns a database view containing only those rows from the input view which match the specified expression.</P>
<P CLASS="Body">
<A NAME="pgfId-1003256"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000791"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000792"></A>&gt;&gt; db=dblookup_table(db,'origin');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000793"></A>&gt;&gt; db=dbsubset(db,'mb&gt;6.3');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000749"></A>&gt;&gt; dbgetv(db,'mb')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000750"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000751"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000752"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000753"></A>    6.4200</P>
<P CLASS="Indented">
<A NAME="pgfId-1000754"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000755"></A>    6.4000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000756"></A>    6.3100</P>
<P CLASS="Indented">
<A NAME="pgfId-1000757"></A>    6.5000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000758"></A>    6.5700</P>
<P CLASS="Indented">
<A NAME="pgfId-1000796"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000759"></A>	&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999577"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999397"></A>dbtheta</H1>
<P CLASS="Body">
<A NAME="pgfId-999574"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003257"></A>In the dbjoin command, specified above, the comparison fields (&quot;join keys&quot;) used to describe which rows correspond were inferred. The dbtheta command allows you to perform the join with full command over whether or not two rows should be associated together or not, based on the supplied test expression. </P>
<P CLASS="Body">
<A NAME="pgfId-1003258"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001094"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001095"></A>&gt;&gt; dbassoc = dblookup_table(db,'assoc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001105"></A>&gt;&gt; dbwfdisc = dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001114"></A>	&gt;&gt; db=dbtheta(dbassoc,dbwfdisc,'assoc.sta == wfdisc.sta')                             </P>
<P CLASS="Indented">
<A NAME="pgfId-1001115"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001116"></A>db = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001117"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001118"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001119"></A>       table: 45</P>
<P CLASS="Indented">
<A NAME="pgfId-1001120"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001121"></A>      record: -504</P>
<P CLASS="Indented">
<A NAME="pgfId-1001122"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001112"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999575"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999398"></A>dbunjoin</H1>
<P CLASS="Body">
<A NAME="pgfId-999572"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003259"></A>Once a view is created, many database operations can be performed on it which winnow out certain rows of each component table. The resulting view may be split into the component rows from each participating table and written to a new database. This is accomplished with the dbunjoin command. </P>
<P CLASS="Body">
<A NAME="pgfId-1003260"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000709"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000710"></A>&gt;&gt; dbarrival=dblookup_table(db,'arrival');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000711"></A>&gt;&gt; dbwfdisc=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000712"></A>&gt;&gt; db=dbjoin(dbarrival,dbwfdisc);</P>
<P CLASS="Indented">
<A NAME="pgfId-1000715"></A>&gt;&gt; dbunjoin(db,'/tmp/newdb');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000722"></A>&gt;&gt; !ls /tmp/newdb*</P>
<P CLASS="Indented">
<A NAME="pgfId-1000723"></A>/tmp/newdb.arrival  /tmp/newdb.wfdisc</P>
<P CLASS="Indented">
<A NAME="pgfId-1000724"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000720"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999573"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999399"></A>epoch2str</H1>
<P CLASS="Body">
<A NAME="pgfId-999570"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003261"></A>Most time handling in Antelope (not to mention Unix) is done in terms of Unix epoch seconds, or seconds since 1970. The epoch2str command provides a highly flexible method for creating more human-readable time strings from an epoch time.</P>
<P CLASS="Body">
<A NAME="pgfId-1003262"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001131"></A>&gt;&gt; now = str2epoch('now')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001132"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001133"></A>now =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001134"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001135"></A>     9.237062953704129e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1001136"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001137"></A>&gt;&gt; epoch2str( now, '%D %H:%M:%S %Z')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001138"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001139"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001140"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001141"></A> 4/10/99 01:04:55 UTC</P>
<P CLASS="Indented">
<A NAME="pgfId-1001142"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001146"></A>&gt;&gt; epoch2str( now, '%A, %B %d %Y')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001147"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001148"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001149"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001150"></A>Saturday, April 10 1999</P>
<P CLASS="Indented">
<A NAME="pgfId-1001151"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001152"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001156"></A>&gt;&gt; epoch2str( now, '%G %l %p')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001157"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001158"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001159"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001160"></A>1999-04-10  1 AM</P>
<P CLASS="Indented">
<A NAME="pgfId-1001161"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001162"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999571"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999400"></A>eval_response</H1>
<P CLASS="Body">
<A NAME="pgfId-999568"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003263"></A>This function allows a dbresponse object (ultimately, a file of instrument response information stored as  poles and zeroes or frequency-amplitude-phase triplets etc.) to be queried for the complex response at certain frequency values. </P>
<P CLASS="Body">
<A NAME="pgfId-1003264"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001199"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001200"></A>&gt;&gt; db=dblookup_table(db,'instrument');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001201"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001202"></A>&gt;&gt; file=dbfilename(db); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001209"></A>&gt;&gt; resp = dbresponse(file);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001227"></A>&gt;&gt; eval_response(resp,6.28)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001228"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001229"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001230"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001231"></A>   1.0008 - 0.0041i</P>
<P CLASS="Indented">
<A NAME="pgfId-1001232"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999569"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001238"></A>&gt;&gt; eval_response(resp,transpose([0.01 0.1 1 10])*6.28)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001239"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001240"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001241"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001242"></A>   0.2550 + 0.8025i</P>
<P CLASS="Indented">
<A NAME="pgfId-1001243"></A>   0.9936 + 0.1116i</P>
<P CLASS="Indented">
<A NAME="pgfId-1001244"></A>   1.0008 - 0.0041i</P>
<P CLASS="Indented">
<A NAME="pgfId-1001245"></A>   0.0000 - 0.0000i</P>
<P CLASS="Indented">
<A NAME="pgfId-1001246"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001247"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001236"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999401"></A>free_response</H1>
<P CLASS="Body">
<A NAME="pgfId-999566"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003265"></A>Once the user is done with a dbresponse object, it must be freed with the free_response command.</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001251"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001252"></A>&gt;&gt; db=dblookup_table(db,'instrument');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001253"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001254"></A>&gt;&gt; file=dbfilename(db); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001255"></A>&gt;&gt; resp = dbresponse(file);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001259"></A>&gt;&gt; free_response( resp )</P>
<P CLASS="Indented">
<A NAME="pgfId-1001262"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999567"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002760"></A>orbafter</H1>
<P CLASS="Body">
<A NAME="pgfId-1002761"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003270"></A>This command allows the user to set the beginning time for reading from an Antelope real-time ORB buffer.  Note that all the orb examples below require a running orb, for which you have permission to connect.</P>
<P CLASS="Body">
<A NAME="pgfId-1003271"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002787"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1002790"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002817"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002794"></A>&gt;&gt; [result,time, srcname, pktid] = orbget( fd );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002795"></A>&gt;&gt; pktid</P>
<P CLASS="Indented">
<A NAME="pgfId-1002796"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002797"></A>pktid =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002798"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002799"></A>        2357</P>
<P CLASS="Indented">
<A NAME="pgfId-1002801"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002802"></A>&gt;&gt; % Get the next packet with timestamp after the packet we just got:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002822"></A>&gt;&gt; % (note that there's no a-priori requirement that packets arrive on the </P>
<P CLASS="Indented">
<A NAME="pgfId-1002823"></A>&gt;&gt; % orb in time order)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002803"></A>&gt;&gt; orbafter( fd, time )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002804"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002805"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002806"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002807"></A>   497</P>
<P CLASS="Indented">
<A NAME="pgfId-1002808"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002811"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002812"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002762"></A>orbclose</H1>
<P CLASS="Body">
<A NAME="pgfId-1002763"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003272"></A>This allows the user to close down an open connection to an Antelope ORB.</P>
<P CLASS="Body">
<A NAME="pgfId-1003273"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002824"></A>&gt;&gt; % This presumes that you have connect permission to a running</P>
<P CLASS="Indented">
<A NAME="pgfId-1002827"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002829"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002831"></A>&gt;&gt; orbclose( fd )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002832"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1002825"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002601"></A>orbget</H1>
<P CLASS="Body">
<A NAME="pgfId-1002602"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003274"></A>The orbget command collects the specified  packet from an Antelope ORB, unpacks it based on its type, and returns it to the user. Currently the understood types are waveform, parameter-file (you can put an entire parameter file on an ORB), and database-row. Other types of packets are returned as byte vectors. Each packet on an orb has a timestamp and a source-name, which are also returned. </P>
<P CLASS="Body">
<A NAME="pgfId-1003275"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002654"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1002606"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1003133"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002759"></A>&gt;&gt; % First we'll get a waveform-data object from an orb:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002608"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002610"></A>&gt;&gt; orbreject( fd, '/db/.*|/pf/.*' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002612"></A>&gt;&gt; [result, time, srcname, pktid, type] = orbget( fd )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002613"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002614"></A>result = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002615"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002616"></A>    database: 16</P>
<P CLASS="Indented">
<A NAME="pgfId-1002617"></A>       table: 5</P>
<P CLASS="Indented">
<A NAME="pgfId-1002618"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1002619"></A>      record: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1002621"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002622"></A>time =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002623"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002624"></A>   9.4638e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1002625"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002626"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002627"></A>srcname =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002628"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002629"></A>AT_MID_SHZ</P>
<P CLASS="Indented">
<A NAME="pgfId-1002630"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002631"></A>pktid =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002634"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002635"></A>      724328</P>
<P CLASS="Indented">
<A NAME="pgfId-1002636"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002638"></A>type =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002639"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002640"></A>waveform</P>
<P CLASS="Indented">
<A NAME="pgfId-1002642"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002643"></A>&gt;&gt; result.record = 0;  </P>
<P CLASS="Indented">
<A NAME="pgfId-1002645"></A>&gt;&gt; plot( trextract_data( result ) );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002679"></A>&nbsp;</P>
</UL>
<DIV>
<IMG SRC="Antelope_Toolbox_for_Matlab-3.gif">
</DIV>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002647"></A>&gt;&gt; trdestroy( result );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002649"></A>&gt;&gt; orbclose( fd );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002666"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002724"></A>&gt;&gt; % Now get a database-row object from an orb:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002684"></A>&gt;&gt; fd = orbopen('megathrust','r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1002686"></A>&gt;&gt; orbselect(fd,'/db/.*');</P>
<P CLASS="Indented">
<A NAME="pgfId-1002688"></A>&gt;&gt; orbseek(fd,'ORBOLDEST');</P>
<P CLASS="Indented">
<A NAME="pgfId-1002690"></A>&gt;&gt; result=orbget(fd)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002692"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002693"></A>result = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002694"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002695"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1002696"></A>       table: 19</P>
<P CLASS="Indented">
<A NAME="pgfId-1002697"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1002698"></A>      record: -504</P>
<P CLASS="Indented">
<A NAME="pgfId-1002699"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002700"></A>&gt;&gt; [lat,lon,mb]=dbgetv(result,'lat','lon','ml')</P>
<P CLASS="Indented">
<A NAME="pgfId-1002703"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002704"></A>lat =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002705"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002706"></A>   59.8962</P>
<P CLASS="Indented">
<A NAME="pgfId-1002707"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002708"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002709"></A>lon =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002710"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002711"></A> -152.0661</P>
<P CLASS="Indented">
<A NAME="pgfId-1002712"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002713"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002714"></A>mb =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002715"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002716"></A>    1.8600</P>
<P CLASS="Indented">
<A NAME="pgfId-1002717"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002725"></A>&gt;&gt; % Finally, get a parameter-file object from an orb:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002726"></A>&gt;&gt; orbselect(fd,'/pf/.*');</P>
<P CLASS="Indented">
<A NAME="pgfId-1002728"></A>&gt;&gt; orbseek(fd,'ORBOLDEST');</P>
<P CLASS="Indented">
<A NAME="pgfId-1002730"></A>&gt;&gt; result=orbget(fd)      </P>
<P CLASS="Indented">
<A NAME="pgfId-1002732"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002733"></A>result = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002734"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002735"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-1002736"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002737"></A>&gt;&gt; pf2string(result)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002738"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002739"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002740"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002741"></A>cmdstring       &quot;echo hi | mail kent&quot;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002742"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002744"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002745"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002837"></A>orbopen</H1>
<P CLASS="Body">
<A NAME="pgfId-1002838"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003277"></A>The orbopen command allows you to establish a read or write connection to a running Antelope ORB server anywhere on the internet (provided the orbserver maintainers have given you permission to connect to that orb). You may have multiple connections at once to the same ORB. </P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003276"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002839"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1002842"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002844"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002845"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002846"></A>fd =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002847"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002848"></A>    21</P>
<P CLASS="Indented">
<A NAME="pgfId-1002849"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002850"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002840"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002785"></A>orbping</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002786"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003278"></A>This command is primarily useful to verify that an ORB connection is up and running. It has the side benefit of telling you the version number of the orbserver.</P>
<P CLASS="Body">
<A NAME="pgfId-1003279"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002856"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1002859"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002861"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002863"></A>&gt;&gt; orbping( fd )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002864"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002865"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002866"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002867"></A>     6</P>
<P CLASS="Indented">
<A NAME="pgfId-1002868"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002869"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002915"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002916"></A>orbreap</H1>
<P CLASS="Body">
<A NAME="pgfId-1002917"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003281"></A>This is one of the most common orb commands. Evaluated in  a tight loop, it allows you to successively receive packet after packet for the streams you've chosen. Each packet can then be processed as necessary.</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003280"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002879"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1002921"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002923"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002925"></A>&gt;&gt; for i = 1:3,</P>
<P CLASS="Indented">
<A NAME="pgfId-1002926"></A>[result,time,srcname] = orbreap( fd );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002927"></A>srcname</P>
<P CLASS="Indented">
<A NAME="pgfId-1002928"></A>end</P>
<P CLASS="Indented">
<A NAME="pgfId-1002958"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002929"></A>srcname =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002930"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002931"></A>AK_MDM_SHZ</P>
<P CLASS="Indented">
<A NAME="pgfId-1002932"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002937"></A>srcname =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002938"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002939"></A>AK_KTH_SHZ</P>
<P CLASS="Indented">
<A NAME="pgfId-1002940"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002945"></A>srcname =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002946"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002947"></A>AK_MCK_SHZ</P>
<P CLASS="Indented">
<A NAME="pgfId-1002948"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002950"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002966"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002784"></A>orbreject</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002770"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003285"></A>This command allows the user to reject certain packets from ever coming across a particular orb connection. The specification is by means of regular-expression matching on the source-names of the packets. </P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003284"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002986"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1002970"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002972"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002974"></A>&gt;&gt; % Reject all parameter-file packets, all database-row packets, </P>
<P CLASS="Indented">
<A NAME="pgfId-1002975"></A>&gt;&gt; % and all waveform packets for the Alaska net whos station-names </P>
<P CLASS="Indented">
<A NAME="pgfId-1002976"></A>&gt;&gt; % start with A,B, or C:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002977"></A>&gt;&gt; % (return the number of sources still available on the connection)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002979"></A>&gt;&gt; orbreject( fd, '/db/.*|/pf/.*|AK_[A-C].*' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002980"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002981"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002982"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002983"></A>   276</P>
<P CLASS="Indented">
<A NAME="pgfId-1002984"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002985"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002968"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002771"></A>orbseek</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003119"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003290"></A>For a given read connection to an orbserver, the orbseek command allows the user to position the reading point in the stream to a certain packet number or to a specified relative location in the stream (newest packet, oldest packet, next packet, etc.).</P>
<P CLASS="Body">
<A NAME="pgfId-1003291"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003123"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1003120"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1003013"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1003017"></A>&gt;&gt; orbseek( fd, 'ORBOLDEST' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003018"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003019"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003020"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003021"></A>      790548</P>
<P CLASS="Indented">
<A NAME="pgfId-1003023"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003024"></A>&gt;&gt; orbseek( fd, 'ORBNEXT' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003025"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003026"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003027"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003028"></A>      790549</P>
<P CLASS="Indented">
<A NAME="pgfId-1003029"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003031"></A>&gt;&gt; orbseek( fd, 'ORBNEWEST' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003032"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003033"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003034"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003035"></A>      321046</P>
<P CLASS="Indented">
<A NAME="pgfId-1003036"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003038"></A>&gt;&gt; orbseek( fd, 'ORBPREV' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003039"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003040"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003041"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003042"></A>      321045</P>
<P CLASS="Indented">
<A NAME="pgfId-1003043"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003045"></A>&gt;&gt; orbseek( fd, 'ORBPREV' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003046"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003047"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003048"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003049"></A>      321044</P>
<P CLASS="Indented">
<A NAME="pgfId-1003050"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003052"></A>&gt;&gt; mypktid = orbtell( fd )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003053"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003054"></A>mypktid =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003055"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003056"></A>      321044</P>
<P CLASS="Indented">
<A NAME="pgfId-1003058"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003059"></A>&gt;&gt; orbseek( fd, 'ORBPREV' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003060"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003061"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003062"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003063"></A>      321043</P>
<P CLASS="Indented">
<A NAME="pgfId-1003064"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003066"></A>&gt;&gt; orbseek( fd, mypktid )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003067"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003068"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003069"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003070"></A>      321044</P>
<P CLASS="Indented">
<A NAME="pgfId-1003071"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003072"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1003014"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002782"></A>orbselect</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002783"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003292"></A>Orbselect is a very useful command which allows the user to filter packets from an orb connection so that only those matching certain source-name criteria get through. </P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003293"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002998"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1003002"></A>&gt;&gt; % Choose all components of station DIV (Divide, Alaska)</P>
<P CLASS="Indented">
<A NAME="pgfId-1003003"></A>&gt;&gt; % Return the number of selected sources</P>
<P CLASS="Indented">
<A NAME="pgfId-1003004"></A>&gt;&gt; orbselect( fd, 'AK_DIV_.*' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003005"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003006"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003007"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003008"></A>     3</P>
<P CLASS="Indented">
<A NAME="pgfId-1003009"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003010"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002999"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002773"></A>orbtell</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002774"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003294"></A>This command returns the packet-identification-number for the current packet on  read connection to an orbserver.</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003295"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003099"></A>&gt;&gt; % This presumes that you have connect permission to a running </P>
<P CLASS="Indented">
<A NAME="pgfId-1003102"></A>&gt;&gt; %  orb called 'nordic' (you probably don't...)</P>
<P CLASS="Indented">
<A NAME="pgfId-1003104"></A>&gt;&gt; fd = orbopen( 'nordic', 'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1003106"></A>&gt;&gt; % Find the packet-id for the current packet:</P>
<P CLASS="Indented">
<A NAME="pgfId-1003107"></A>&gt;&gt; orbtell( fd )</P>
<P CLASS="Indented">
<A NAME="pgfId-1003108"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003109"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1003110"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003111"></A>      377956</P>
<P CLASS="Indented">
<A NAME="pgfId-1003112"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003113"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003100"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999402"></A>pf2string</H1>
<P CLASS="Body">
<A NAME="pgfId-999564"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003298"></A>An entire parameter file (being essentially an ASCII file) or subsection thereof may be converted to a string. </P>
<P CLASS="Body">
<A NAME="pgfId-1003299"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000104"></A>&gt;&gt; pf=dbpf('dbfixids');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000110"></A>&gt;&gt; pf2string(pf)      </P>
<P CLASS="Indented">
<A NAME="pgfId-1000111"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000112"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000113"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000114"></A>css3.0  &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-1000115"></A>aliases &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-1000116"></A>magid   mbid msid mlid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000117"></A>orid    prefor</P>
<P CLASS="Indented">
<A NAME="pgfId-1000118"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-1000119"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-1000132"></A>rt1.0   &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-1000133"></A>aliases &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-1000134"></A>magid   mbid msid mlid</P>
<P CLASS="Indented">
<A NAME="pgfId-1000135"></A>orid    prefor</P>
<P CLASS="Indented">
<A NAME="pgfId-1000136"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-1000137"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-1000138"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000140"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999565"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999403"></A>pf2struct</H1>
<P CLASS="Body">
<A NAME="pgfId-999562"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003300"></A>The Matlab Antelope Toolbox allows an entire parameter file to be loaded into a Matlab struct, which is very close to the same idea: a flexible set of key-value pairs. The `recursive' option to pf2struct can be used to read a complex parameter file in all at once into an easy-to-use Matlab-style object. </P>
<P CLASS="Body">
<A NAME="pgfId-1003303"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999563"></A>&gt;&gt; pf=dbpf('dbloc2');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000021"></A>&gt;&gt; pf2struct(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000022"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000023"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000024"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000025"></A>       Define: [1x1 dbpf]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000026"></A>    Processes: [1x1 dbpf]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000027"></A>          Run: [1x1 dbpf]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000028"></A>        State: [1x1 dbpf]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000029"></A>         User: [1x1 dbpf]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000030"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000031"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000039"></A>&gt;&gt; pf2struct(pf,'recursive')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000040"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000041"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000042"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000043"></A>       Define: [1x1 struct]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000044"></A>    Processes: [1x1 struct]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000045"></A>          Run: [1x1 struct]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000046"></A>        State: [1x1 struct]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000047"></A>         User: [1x1 struct]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000048"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000049"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000053"></A>&gt;&gt; ans.Define</P>
<P CLASS="Indented">
<A NAME="pgfId-1000054"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000055"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000056"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000057"></A>                      Results_dir: 'results'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000058"></A>                 Temporary_db: 'trial'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000059"></A>                         Work_dir: 'tmp'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000060"></A>                    arrival_color: 'purple'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000061"></A>                      arrival_info: 'arid sta time iphase deltim fm amp per auth'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000062"></A>                arrivals_height: '300'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000063"></A>                 arrivals_width: '800'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000064"></A>                   azimuth_font: '-Adobe-Helvetica-Bold-O-Normal--*-120-*'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000065"></A>                   azimuth_info: 'azimuth delaz'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000066"></A>         bad_residual_color: 'orange'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000067"></A>                     button_row: '49'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000099"></A> dbpick_channel_options: [1x1  struct]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000069"></A>     dbpick_options_order: 'Vertical Horizontal All Selected'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000070"></A>dbpick_revert_to_default: 'yes'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000071"></A>               fixedwidth_font: '-Adobe-Courier-Bold-R-Normal--*-120-*'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000072"></A>                 ignored_color: 'gray60'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000073"></A>                 max_event_delta: '5'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000074"></A>max_event_time_difference: '25'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000075"></A>                                  maxcol: '25'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000076"></A>                                maxrow: '50'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000077"></A>                ok_residual_color: 'DodgerBlue'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000078"></A>                          origin_color: 'magenta'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000079"></A>                            origin_info: [1x69 char  ]</P>
<P CLASS="Indented">
<A NAME="pgfId-1000080"></A>                     origins_height: '150'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000081"></A>                      origins_width: '800'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000082"></A>                        partial_color: 'cyan'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000083"></A>                            plain_font: '-Adobe-Helvetica-Bold-R-Normal--*-120-*'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000084"></A>                              site_info: 'staname {lat . &quot;,&quot; . lon} gregion(lat,lon)'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000085"></A>                    slowness_info: 'slow delslo'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000086"></A>                      station_color: 'gray'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000087"></A>                            time_font: '-Adobe-Courier-Bold-R-Normal--*-120-*'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000088"></A>                          used_color: 'black'</P>
<P CLASS="Indented">
<A NAME="pgfId-1000089"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000090"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000019"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999404"></A>pffiles</H1>
<P CLASS="Body">
<A NAME="pgfId-999560"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003308"></A>The Antelope parameter-file mechanism allows the parameters to be extracted from any of the matching parameter files along an entire search path (specified in the PFPATH environment variable). The pffiles command shows which pathnames actually contributed to a given paramter-file-object's contents. The `all' option shows all the files that were tested for existence and possible contribution.</P>
<P CLASS="Body">
<A NAME="pgfId-1003311"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999889"></A>&gt;&gt; pffiles('rtexec')</P>
<P CLASS="Indented">
<A NAME="pgfId-999890"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999891"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-999892"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999893"></A>    '/opt/antelope/4.2u/data/pf/rtexec.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-999894"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999895"></A>&gt;&gt; pffiles('rtexec','all')</P>
<P CLASS="Indented">
<A NAME="pgfId-999896"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999897"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-999898"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999899"></A>    '/opt/antelope/4.2u/data/maps/site/rtexec.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-999900"></A>    '/opt/antelope/4.2u/data/pf/rtexec.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-999901"></A>    '/opt/antelope/4.2u/data/pf/site/rtexec.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-999902"></A>    '/home/kent/data/pf/rtexec.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-999903"></A>    './rtexec.pf'</P>
<P CLASS="Indented">
<A NAME="pgfId-999904"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999905"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999561"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999405"></A>pffree</H1>
<P CLASS="Body">
<A NAME="pgfId-999558"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003312"></A>This frees the resources used by a dbpf object when it is no longer needed. </P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999728"></A>&gt;&gt; pf = dbpf( 'dbloc2' );</P>
<P CLASS="Indented">
<A NAME="pgfId-999729"></A>&gt;&gt; pffree(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-999730"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999559"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999406"></A>pfget</H1>
<P CLASS="Body">
<A NAME="pgfId-999556"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003313"></A>The pfget command retrieves the specified parameter from the dbpf object into an appropriate format. </P>
<P CLASS="Body">
<A NAME="pgfId-1003314"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999913"></A>&gt;&gt; pf = dbpf( 'rtexec' );</P>
<P CLASS="Indented">
<A NAME="pgfId-999917"></A>&gt;&gt; pfget( pf, 'Database' )       </P>
<P CLASS="Indented">
<A NAME="pgfId-999918"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999919"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999920"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999921"></A>rtsys/rtsys</P>
<P CLASS="Indented">
<A NAME="pgfId-999922"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999923"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999557"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999407"></A>pfget_arr</H1>
<P CLASS="Body">
<A NAME="pgfId-999554"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003318"></A>This retrieves an associative array from a parameter-file object.</P>
<P CLASS="Body">
<A NAME="pgfId-1003319"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999937"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999927"></A>&gt;&gt; pfget_arr(pf,'Limit')</P>
<P CLASS="Indented">
<A NAME="pgfId-999928"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999929"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-999930"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999931"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-999932"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999933"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-999941"></A>&gt;&gt; pfget_arr(pf,'Limit','recursive') </P>
<P CLASS="Indented">
<A NAME="pgfId-999942"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999943"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-999944"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999945"></A>    coredumpsize: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999946"></A>         cputime: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999947"></A>        datasize: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999948"></A>     descriptors: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999949"></A>        filesize: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999950"></A>       stacksize: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999951"></A>      vmemoryuse: 'unlimited'</P>
<P CLASS="Indented">
<A NAME="pgfId-999952"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999953"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999555"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999408"></A>pfget_boolean</H1>
<P CLASS="Body">
<A NAME="pgfId-999552"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003320"></A>This retrieves a boolean value from a parameter-file object, translating strings such as `yes' or `false'  into numeric values. </P>
<P CLASS="Body">
<A NAME="pgfId-1003323"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999975"></A>&gt;&gt; pf=dbpf('dbloc2')</P>
<P CLASS="Indented">
<A NAME="pgfId-999976"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999977"></A>pf = </P>
<P CLASS="Indented">
<A NAME="pgfId-999978"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999979"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-999980"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999553"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-999986"></A>&gt;&gt; subpf=pfget(pf,'State')    </P>
<P CLASS="Indented">
<A NAME="pgfId-999987"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999988"></A>subpf = </P>
<P CLASS="Indented">
<A NAME="pgfId-999989"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999990"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-999991"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999992"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-999996"></A>&gt;&gt; pfget_boolean(subpf,'auto_save')</P>
<P CLASS="Indented">
<A NAME="pgfId-999997"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999998"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999999"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000000"></A>    -1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000001"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000002"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000006"></A>&gt;&gt; pfget_boolean(subpf,'auto_associate')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000007"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000008"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000009"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000010"></A>     0</P>
<P CLASS="Indented">
<A NAME="pgfId-1000011"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000012"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999984"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999409"></A>pfget_num</H1>
<P CLASS="Body">
<A NAME="pgfId-999550"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003327"></A>This command retrieves a numeric value from a parameter file. </P>
<P CLASS="Body">
<A NAME="pgfId-1003328"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999740"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999741"></A>&gt;&gt; pfget_num( pf, 'Time_to_die' )</P>
<P CLASS="Indented">
<A NAME="pgfId-999742"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999743"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999744"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999745"></A>    20</P>
<P CLASS="Indented">
<A NAME="pgfId-999746"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999747"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999551"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999410"></A>pfget_string</H1>
<P CLASS="Body">
<A NAME="pgfId-999760"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003329"></A>This command retrieves a string value from a parameter file.</P>
<P CLASS="Body">
<A NAME="pgfId-1003330"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999776"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999766"></A>&gt;&gt; pfget_string( pf, 'Database' )</P>
<P CLASS="Indented">
<A NAME="pgfId-999767"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999768"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999769"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999770"></A>rtsys/rtsys</P>
<P CLASS="Indented">
<A NAME="pgfId-999771"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999772"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999761"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999762"></A>pfget_tbl</H1>
<P CLASS="Body">
<A NAME="pgfId-999546"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003331"></A>This command retrieves a table of values from a parameter file. </P>
<P CLASS="Body">
<A NAME="pgfId-1003407"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999780"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999784"></A>&gt;&gt; pfget_tbl( pf, 'Buttons' )            </P>
<P CLASS="Indented">
<A NAME="pgfId-999785"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999786"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-999787"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999788"></A>    'top     xterm -geom 80x25 -e top'</P>
<P CLASS="Indented">
<A NAME="pgfId-999789"></A>    'clients xterm -geom 132x25 -e orbstat -c localhost 5'</P>
<P CLASS="Indented">
<A NAME="pgfId-999790"></A>    'sources xterm -geom 132x60 -e orbstat -s localhost 5'</P>
<P CLASS="Indented">
<A NAME="pgfId-999791"></A>    'rtd     orbmonrtd localhost'</P>
<P CLASS="Indented">
<A NAME="pgfId-999792"></A>    'dbevents dbevents archive/nw'</P>
<P CLASS="Indented">
<A NAME="pgfId-999793"></A>    'qtmon      qtmon localhost localhost localhost'</P>
<P CLASS="Indented">
<A NAME="pgfId-999794"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999795"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999547"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999412"></A>pfkeys</H1>
<P CLASS="Body">
<A NAME="pgfId-999544"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003332"></A>This command extracts the key names for the key-value pairs in a parameter file. </P>
<P CLASS="Body">
<A NAME="pgfId-1003333"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999799"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999803"></A>&gt;&gt; pfkeys(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-999804"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999805"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-999806"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999807"></A>    'ANTELOPE'</P>
<P CLASS="Indented">
<A NAME="pgfId-999808"></A>    'Buttons'</P>
<P CLASS="Indented">
<A NAME="pgfId-999809"></A>    'Crontab'</P>
<P CLASS="Indented">
<A NAME="pgfId-999810"></A>    'Database'</P>
<P CLASS="Indented">
<A NAME="pgfId-999811"></A>    'Env'</P>
<P CLASS="Indented">
<A NAME="pgfId-999812"></A>    'Limit'</P>
<P CLASS="Indented">
<A NAME="pgfId-999813"></A>    'Minimum_period_between_starts'</P>
<P CLASS="Indented">
<A NAME="pgfId-999814"></A>    'Network_database'</P>
<P CLASS="Indented">
<A NAME="pgfId-999815"></A>    'Parameter_files'</P>
<P CLASS="Indented">
<A NAME="pgfId-999816"></A>    'Processes'</P>
<P CLASS="Indented">
<A NAME="pgfId-999817"></A>    'ROOT'</P>
<P CLASS="Indented">
<A NAME="pgfId-999818"></A>    'Run'</P>
<P CLASS="Indented">
<A NAME="pgfId-999819"></A>    'Shutdown_order'</P>
<P CLASS="Indented">
<A NAME="pgfId-999820"></A>    'Shutdown_tasks'</P>
<P CLASS="Indented">
<A NAME="pgfId-999821"></A>    'Start_period'</P>
<P CLASS="Indented">
<A NAME="pgfId-999822"></A>    'Startup_tasks'</P>
<P CLASS="Indented">
<A NAME="pgfId-999823"></A>    'Time_to_die'</P>
<P CLASS="Indented">
<A NAME="pgfId-999824"></A>    'Use_UTC'</P>
<P CLASS="Indented">
<A NAME="pgfId-999825"></A>    'disks'</P>
<P CLASS="Indented">
<A NAME="pgfId-999826"></A>    'orbname'</P>
<P CLASS="Indented">
<A NAME="pgfId-999827"></A>    'orbtasks'</P>
<P CLASS="Indented">
<A NAME="pgfId-999828"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999829"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999545"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999413"></A>pfname</H1>
<P CLASS="Body">
<A NAME="pgfId-999542"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003334"></A>This command returns the parameter-file name from which a parameter-file object was created. </P>
<P CLASS="Body">
<A NAME="pgfId-1003335"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999837"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999841"></A>&gt;&gt; pfname(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-999842"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999843"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999844"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999845"></A>rtexec</P>
<P CLASS="Indented">
<A NAME="pgfId-999846"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999847"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999543"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002431"></A>pfput_boolean</H1>
<P CLASS="Body">
<A NAME="pgfId-1002410"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003336"></A>This function puts a value into a parameter file as a boolean.</P>
<P CLASS="Body">
<A NAME="pgfId-1003337"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002411"></A>&gt;&gt; pf = dbpf;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002419"></A>&gt;&gt; pfput_boolean( pf, 'myboolean', 'True' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002420"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002421"></A>&gt;&gt; pf2string( pf )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002422"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002423"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002424"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002425"></A>myboolean       True</P>
<P CLASS="Indented">
<A NAME="pgfId-1002432"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002433"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002434"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002455"></A>pfput</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002461"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003342"></A>The pfput command is a very general routine to put strings, numbers, cellarrays (as tables), or structures (as associative arrays) into a parameter-file object.</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003343"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002468"></A>&gt;&gt; pf = dbpf;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002469"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002470"></A>&gt;&gt; pfput( pf, 'mydouble', 3.14 )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002471"></A>&gt;&gt; pfput( pf, 'myint', 24 )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002472"></A>&gt;&gt; pfput( pf, 'mystring', 'test string' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002473"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002474"></A>&gt;&gt; z.a = 21;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002475"></A>&gt;&gt; z.b = 'hello';</P>
<P CLASS="Indented">
<A NAME="pgfId-1002476"></A>&gt;&gt; z.c = '45.6';</P>
<P CLASS="Indented">
<A NAME="pgfId-1002477"></A>&gt;&gt; pfput( pf, 'myarray', z )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002478"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002479"></A>&gt;&gt; pfput( pf, 'mytable', {'hello' 'yes' 'no' 'goodbye'} )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002480"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002481"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002482"></A>&gt;&gt; pf2string( pf )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002483"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002484"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002485"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002486"></A>myarray &amp;Arr{</P>
<P CLASS="Indented">
<A NAME="pgfId-1002487"></A>a       21</P>
<P CLASS="Indented">
<A NAME="pgfId-1002488"></A>b       hello</P>
<P CLASS="Indented">
<A NAME="pgfId-1002489"></A>c       45.6</P>
<P CLASS="Indented">
<A NAME="pgfId-1002490"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-1002491"></A>mydouble        3.14</P>
<P CLASS="Indented">
<A NAME="pgfId-1002492"></A>myint   24</P>
<P CLASS="Indented">
<A NAME="pgfId-1002493"></A>mystring        test string</P>
<P CLASS="Indented">
<A NAME="pgfId-1002494"></A>mytable &amp;Tbl{</P>
<P CLASS="Indented">
<A NAME="pgfId-1002495"></A>hello</P>
<P CLASS="Indented">
<A NAME="pgfId-1002496"></A>yes</P>
<P CLASS="Indented">
<A NAME="pgfId-1002497"></A>no</P>
<P CLASS="Indented">
<A NAME="pgfId-1002498"></A>goodbye</P>
<P CLASS="Indented">
<A NAME="pgfId-1002499"></A>}</P>
<P CLASS="Indented">
<A NAME="pgfId-1002501"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002502"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002466"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999414"></A>pfresolve</H1>
<P CLASS="Body">
<A NAME="pgfId-999540"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003344"></A>This is an alternative interface to the parameter-file objects with a naming convention that reflects any nesting in the parameter-file components (tables and hashes). For further detail see the Datascope man pages.</P>
<P CLASS="Body">
<A NAME="pgfId-1003345"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999957"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999961"></A>&gt;&gt; pfresolve(pf,'Limit{filesize}')</P>
<P CLASS="Indented">
<A NAME="pgfId-999962"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999963"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999964"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999965"></A>unlimited</P>
<P CLASS="Indented">
<A NAME="pgfId-999966"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999967"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999541"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999415"></A>pftype</H1>
<P CLASS="Body">
<A NAME="pgfId-999538"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003346"></A>Only top-level parameter-file objects are of file type. Subsidiary key-value structures (arrays) inside a parameter file will have dbpf objects of type PFARR.</P>
<P CLASS="Body">
<A NAME="pgfId-1003347"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999864"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999870"></A>&gt;&gt; pftype(pf)</P>
<P CLASS="Indented">
<A NAME="pgfId-999871"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999872"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-999873"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999874"></A>PFFILE</P>
<P CLASS="Indented">
<A NAME="pgfId-999875"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999876"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999865"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002287"></A>pfupdate</H1>
<P CLASS="Body">
<A NAME="pgfId-1002289"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003348"></A>This command allows your program to stay current with a parameter file if outside forces are changing it while your program is running. </P>
<P CLASS="Body">
<A NAME="pgfId-1003349"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002291"></A>&gt;&gt; % Create a parameter file and put one value in it</P>
<P CLASS="Indented">
<A NAME="pgfId-1002294"></A>&gt;&gt; unix( 'echo myint 13 &gt; /tmp/myfile.pf' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002295"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002296"></A>&gt;&gt; % Open the parameter file and extract the parameter:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002297"></A>&gt;&gt; pf = dbpf( '/tmp/myfile.pf' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002298"></A>&gt;&gt; pfget_num( pf, 'myint' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002299"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002300"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002301"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002302"></A>    13</P>
<P CLASS="Indented">
<A NAME="pgfId-1002304"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002305"></A>&gt;&gt; % Now change the parameter file from outside the Matlab context:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002306"></A>&gt;&gt; unix( 'echo myint 25 &gt;! /tmp/myfile.pf' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002307"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002308"></A>&gt;&gt; % a retrieval of the parameter returns the previously cached value:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002309"></A>&gt;&gt; pfget_num( pf, 'myint' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002310"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002311"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002312"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002313"></A>    13</P>
<P CLASS="Indented">
<A NAME="pgfId-1002315"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002316"></A>&gt;&gt; % Updating the parameter-file object refreshes the cached values:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002317"></A>&gt;&gt; [pf, modified] = pfupdate( pf )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002325"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002326"></A>pf = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002327"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002328"></A>        dbpf object: 1-by-1</P>
<P CLASS="Indented">
<A NAME="pgfId-1002330"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002331"></A>modified =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002332"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002333"></A>     1</P>
<P CLASS="Indented">
<A NAME="pgfId-1002334"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002336"></A>&gt;&gt; % Now the retrieved parameter reflects the changed file:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002337"></A>&gt;&gt; pfget_num( pf, 'myint' )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002338"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002339"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1002340"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002341"></A>    25</P>
<P CLASS="Indented">
<A NAME="pgfId-1002342"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002343"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1002288"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999866"></A>pfwrite</H1>
<P CLASS="Body">
<A NAME="pgfId-999536"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003350"></A>A dbpf object, possibly modified, may be written out to the specified filename. </P>
<P CLASS="Body">
<A NAME="pgfId-1003408"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-999880"></A>&gt;&gt; pf = dbpf( 'rtexec');</P>
<P CLASS="Indented">
<A NAME="pgfId-999884"></A>&gt;&gt; pfwrite(pf,'/tmp/rtexec_copy.pf')</P>
<P CLASS="Indented">
<A NAME="pgfId-999885"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999537"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999417"></A>str2epoch</H1>
<P CLASS="Body">
<A NAME="pgfId-999534"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003351"></A>This utility is a very powerful and flexible parsing utility to turn a human-readable time string into an epoch time. </P>
<P CLASS="Body">
<A NAME="pgfId-1003352"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000589"></A>&gt;&gt; format long</P>
<P CLASS="Indented">
<A NAME="pgfId-1000590"></A>&gt;&gt; str2epoch('now')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000591"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000592"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000593"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000594"></A>     9.237016155097741e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000595"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000596"></A>&gt;&gt; str2epoch('3/17/99 15:24:16.5')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000597"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000598"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000599"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000600"></A>     9.216842565000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000601"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000602"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000606"></A>&gt;&gt; str2epoch('January 27, 1973 4:00 pm')  </P>
<P CLASS="Indented">
<A NAME="pgfId-1000607"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000608"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000609"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000610"></A>    96998400</P>
<P CLASS="Indented">
<A NAME="pgfId-1000611"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000612"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999535"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999418"></A>strdate</H1>
<P CLASS="Body">
<A NAME="pgfId-999532"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003353"></A>This utility takes a Unix epoch time and returns a stock day format.</P>
<P CLASS="Body">
<A NAME="pgfId-1003354"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000616"></A>&gt;&gt; strdate(96998400)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000617"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000618"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000619"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000620"></A> 1/27/1973</P>
<P CLASS="Indented">
<A NAME="pgfId-1000621"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-999533"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1000659"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999419"></A>strtdelta</H1>
<P CLASS="Body">
<A NAME="pgfId-999526"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003355"></A>This utility turns the input number of seconds into a reasonably-formatted value for a time interval. </P>
<P CLASS="Body">
<A NAME="pgfId-1003360"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000661"></A>&gt;&gt; strtdelta(7200)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000662"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000663"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000664"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000665"></A>  2:00 hours</P>
<P CLASS="Indented">
<A NAME="pgfId-1000666"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000667"></A>&gt;&gt; strtdelta(3*86400+15*3600)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000668"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000669"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000670"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000671"></A> 3 days 15.0 hours</P>
<P CLASS="Indented">
<A NAME="pgfId-1000672"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000673"></A>&gt;&gt; strtdelta(912343243)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000674"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000675"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000676"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000677"></A> 28 years 339 days</P>
<P CLASS="Indented">
<A NAME="pgfId-1000678"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000679"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999527"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999420"></A>strtime</H1>
<P CLASS="Body">
<A NAME="pgfId-999524"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003361"></A>This function takes a Unix epoch time and returns a stock-format time and day string. </P>
<P CLASS="Body">
<A NAME="pgfId-1003362"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000626"></A>&gt;&gt; strtime(96998400)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000627"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000628"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000629"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000630"></A> 1/27/1973  16:00:00.000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000631"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000632"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999525"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999421"></A>strydtime</H1>
<P CLASS="Body">
<A NAME="pgfId-999522"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003363"></A>This function is the same as the strtime function but includes as well the day number of the year. </P>
<P CLASS="Body">
<A NAME="pgfId-1003364"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000636"></A>&gt;&gt; strydtime(96998400)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000637"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000638"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000639"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000640"></A> 1/27/1973 (027) 16:00:00.000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000641"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000642"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999523"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999422"></A>tr_endtime</H1>
<P CLASS="Body">
<A NAME="pgfId-999520"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003365"></A>This is a safe macro to reliably construct an endtime from a starting time, sample rate, and number of samples. All other useful permutations of this routine exist as well (below). </P>
<P CLASS="Body">
<A NAME="pgfId-1003366"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000912"></A>&gt;&gt; time, endtime, nsamp, samprate</P>
<P CLASS="Indented">
<A NAME="pgfId-1000913"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000914"></A>time =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000915"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000916"></A>     7.061397152000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000917"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000918"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000919"></A>endtime =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000920"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000921"></A>     7.061398415000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000922"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000923"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000924"></A>nsamp =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000925"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000926"></A>        2527</P>
<P CLASS="Indented">
<A NAME="pgfId-1000927"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000928"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000929"></A>samprate =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000930"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000931"></A>    20</P>
<P CLASS="Indented">
<A NAME="pgfId-1000932"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000933"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1000937"></A>&gt;&gt; tr_endtime(time,samprate,nsamp)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000938"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000939"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000940"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000941"></A>     7.061398415000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000942"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000943"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999521"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999423"></A>tr_nsamp</H1>
<P CLASS="Body">
<A NAME="pgfId-999518"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000961"></A>&gt;&gt; tr_nsamp(time,samprate,endtime)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000962"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000963"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000964"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000965"></A>        2527</P>
<P CLASS="Indented">
<A NAME="pgfId-1000966"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000967"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999519"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999424"></A>tr_samp2time</H1>
<P CLASS="Body">
<A NAME="pgfId-999516"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000971"></A>&gt;&gt; tr_samp2time(time,samprate,1000)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000972"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000973"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000974"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000975"></A>     7.061397651500001e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000976"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000977"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999517"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999425"></A>tr_samprate</H1>
<P CLASS="Body">
<A NAME="pgfId-999514"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000947"></A>&gt;&gt; tr_samprate(time,nsamp,endtime)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000948"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000949"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000950"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000951"></A>  20.00000000755087</P>
<P CLASS="Indented">
<A NAME="pgfId-1000952"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000953"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999515"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999426"></A>tr_time2samp</H1>
<P CLASS="Body">
<A NAME="pgfId-999508"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000981"></A>&gt;&gt; tr_time2samp(time,samprate,7.061397651500001e+08)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000982"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000983"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000984"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000985"></A>        1000</P>
<P CLASS="Indented">
<A NAME="pgfId-1000986"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000987"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999509"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999427"></A>trapply_calib</H1>
<P CLASS="Body">
<A NAME="pgfId-999506"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003367"></A>This function applies the calibration constant to waveform data contained in the trace object. </P>
<P CLASS="Body">
<A NAME="pgfId-1003368"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001058"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001059"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001060"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001061"></A>&gt;&gt; [time,endtime,nsamp,samprate]=dbgetv(db,'time','endtime','nsamp','samprate');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001062"></A>&gt;&gt; tr = trload_css(db,time,endtime);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001066"></A>&gt;&gt; trapply_calib(tr)       </P>
<P CLASS="Indented">
<A NAME="pgfId-1001957"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999507"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999428"></A>trdestroy</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001080"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003371"></A>This routine frees all resources associated with a trace-object. </P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1003369"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1003370"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001081"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001082"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001083"></A>&gt;&gt; [time,endtime,nsamp,samprate]=dbgetv(db,'time','endtime','nsamp','samprate');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001084"></A>&gt;&gt; tr = trload_css(db,time,endtime);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001085"></A>	&gt;&gt; trdestroy( tr )</P>
<P CLASS="Indented">
<A NAME="pgfId-1001086"></A>&gt;&gt;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999505"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999429"></A>trextract_data</H1>
<P CLASS="Body">
<A NAME="pgfId-999502"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003372"></A>A trace-object is just a database pointer, pointing to an open database in the Trace4.0 schema. The &quot;trace&quot; table of this database has a field called &quot;data&quot;, which contains the address of some waveform data in memory. The trextract_data command gets this address and loads the data contained into a Matlab vector. </P>
<P CLASS="Body">
<A NAME="pgfId-1003373"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000991"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000992"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000993"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000995"></A>&gt;&gt; [time,endtime,nsamp,samprate]=dbgetv(db,'time','endtime','nsamp','samprate');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001016"></A>&gt;&gt; tr = trload_css(db,time,endtime);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001029"></A>&gt;&gt; tr.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001032"></A>&gt;&gt; data=trextract_data(tr);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001039"></A>&gt;&gt; whos data</P>
<P CLASS="Indented">
<A NAME="pgfId-1001040"></A>  Name       Size         Bytes  Class</P>
<P CLASS="Indented">
<A NAME="pgfId-1001041"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001042"></A>  data    2150x1          17200  double array</P>
<P CLASS="Indented">
<A NAME="pgfId-1001043"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001044"></A>Grand total is 2150 elements using 17200 bytes</P>
<P CLASS="Indented">
<A NAME="pgfId-1001045"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001046"></A>&gt;&gt; plot(data)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001037"></A>&nbsp;</P>
</UL>
<DIV>
<IMG SRC="Antelope_Toolbox_for_Matlab-4.gif">
</DIV>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001027"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999503"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999430"></A>trfree</H1>
<P CLASS="Body">
<A NAME="pgfId-999500"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003374"></A>Trfree is a way to free resources for part of a trace-object structure. Consider using trdestroy unless you know what you're doing. </P>
<P CLASS="Body">
<A NAME="pgfId-1003375"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001070"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001071"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001072"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001073"></A>&gt;&gt; [time,endtime,nsamp,samprate]=dbgetv(db,'time','endtime','nsamp','samprate');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001074"></A>&gt;&gt; tr = trload_css(db,time,endtime);</P>
<P CLASS="Indented">
<A NAME="pgfId-999501"></A>	&gt;&gt; trfree( tr )</P>
<P CLASS="Indented">
<A NAME="pgfId-1001077"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001078"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999431"></A>trgetwf</H1>
<P CLASS="Body">
<A NAME="pgfId-999494"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003376"></A>	This command is one of several methods to extract waveform data from a database.</P>
<P CLASS="Body">
<A NAME="pgfId-1003377"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001268"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001269"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001270"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001286"></A>&gt;&gt; [data,nsamp,t0,t1]=trgetwf(db);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001290"></A>&gt;&gt; whos data </P>
<P CLASS="Indented">
<A NAME="pgfId-1001291"></A>  Name       Size         Bytes  Class</P>
<P CLASS="Indented">
<A NAME="pgfId-1001292"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001293"></A>  data    2527x1          20216  double array</P>
<P CLASS="Indented">
<A NAME="pgfId-1001294"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001295"></A>Grand total is 2527 elements using 20216 bytes</P>
<P CLASS="Indented">
<A NAME="pgfId-1001296"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001297"></A>&gt;&gt; plot(data)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001300"></A>&nbsp;</P>
</UL>
<DIV>
<IMG SRC="Antelope_Toolbox_for_Matlab-5.gif">
</DIV>
<P CLASS="Body">
<A NAME="pgfId-999495"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999432"></A>trinsert_data</H1>
<P CLASS="Body">
<A NAME="pgfId-1001702"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003378"></A>This is the converse of the trextract_data command, described above. </P>
<P CLASS="Body">
<A NAME="pgfId-1003379"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001709"></A>&gt;&gt; tr=trnew;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001724"></A>&gt;&gt; tr=dblookup_table(tr,'trace');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001777"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001770"></A>&gt;&gt; % Construct a fake waveform:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001733"></A>&gt;&gt; data=sin([0:999]); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001736"></A>&gt;&gt; nsamp=1000;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001784"></A>&gt;&gt; sta='SINE';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001785"></A>&gt;&gt; chan='BHZ';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001737"></A>&gt;&gt; time=str2epoch('now');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001738"></A>&gt;&gt; samprate=20;      </P>
<P CLASS="Indented">
<A NAME="pgfId-1001744"></A>&gt;&gt; endtime=tr_endtime(time,samprate,nsamp);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001776"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001775"></A>&gt;&gt; % Put the waveform into the trace-object:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001781"></A>&gt;&gt; tr.record=dbaddnull(tr);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001750"></A>&gt;&gt; dbputv(tr,'time',time,'samprate',samprate,'endtime',endtime,'sta',sta,'chan',chan);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001761"></A>&gt;&gt; trinsert_data(tr,data)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001759"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001727"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1001722"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1001710"></A>trload_css</H1>
<P CLASS="Body">
<A NAME="pgfId-1001711"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003380"></A>This command loads the specified time range of data from a database pointer into a trace object (which, of course, is also a database pointer but in a special schema designed for the the handling of waveform data in memory). </P>
<P CLASS="Body">
<A NAME="pgfId-1003381"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000856"></A>&gt;&gt; db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-999492"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-1000863"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000870"></A>&gt;&gt; format long</P>
<P CLASS="Indented">
<A NAME="pgfId-1000871"></A>&gt;&gt; [time,endtime,nsamp,samprate]=dbgetv(db,'time','endtime','nsamp','samprate')</P>
<P CLASS="Indented">
<A NAME="pgfId-1000872"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000873"></A>time =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000874"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000875"></A>     7.061397152000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000876"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000877"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000878"></A>endtime =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000879"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000880"></A>     7.061398415000000e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1000881"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000882"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000883"></A>nsamp =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000884"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000885"></A>        2527</P>
<P CLASS="Indented">
<A NAME="pgfId-1000886"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000887"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000888"></A>samprate =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000889"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000890"></A>    20</P>
<P CLASS="Indented">
<A NAME="pgfId-1000891"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000899"></A>&gt;&gt; tr = trload_css(db,time,endtime)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000900"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000901"></A>tr = </P>
<P CLASS="Indented">
<A NAME="pgfId-1000902"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000903"></A>    database: 1</P>
<P CLASS="Indented">
<A NAME="pgfId-1000904"></A>       table: 5</P>
<P CLASS="Indented">
<A NAME="pgfId-1000905"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000906"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1000907"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000908"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1002544"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1002545"></A>trload_cssgrp</H1>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1002546"></A>&nbsp;</P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1003386"></A>This command is similar to trload_css described above. </P>
<P CLASS="Body">
<A NAME="pgfId-1003390"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000868"></A>&gt;&gt; db = dbopen( demodb_path,'r' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002511"></A>&gt;&gt; db=dblookup_table( db,'wfdisc' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002513"></A>&gt;&gt; db= dbsort( db, 'sta', 'chan', 'time' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002517"></A>&gt;&gt; [time,endtime,nsamp,samprate]=dbgetv( db,'time','endtime','nsamp','samprate' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002519"></A>&gt;&gt; tr = trload_cssgrp( db,time(1),endtime(1) )</P>
<P CLASS="Indented">
<A NAME="pgfId-1002567"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002521"></A>tr = </P>
<P CLASS="Indented">
<A NAME="pgfId-1002522"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002523"></A>    database: 8</P>
<P CLASS="Indented">
<A NAME="pgfId-1002524"></A>       table: 5</P>
<P CLASS="Indented">
<A NAME="pgfId-1002525"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1002526"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1002527"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002529"></A>&gt;&gt; tr.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1002530"></A>&gt;&gt; data=trextract_data( tr );</P>
<P CLASS="Indented">
<A NAME="pgfId-1002531"></A>&gt;&gt; plot(data)</P>
<P CLASS="Indented">
<A NAME="pgfId-1002532"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999493"></A>trnew</H1>
<P CLASS="Body">
<A NAME="pgfId-1001669"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003391"></A>The trnew command creates a new, empty  trace-object database. </P>
<P CLASS="Body">
<A NAME="pgfId-1003392"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001673"></A>&gt;&gt; tr=trnew</P>
<P CLASS="Indented">
<A NAME="pgfId-1001674"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001675"></A>tr = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001676"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001677"></A>    database: 0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001678"></A>       table: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001679"></A>       field: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001680"></A>      record: -501</P>
<P CLASS="Indented">
<A NAME="pgfId-1001681"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001682"></A>&gt;&gt; dbquery(tr,'dbDATABASE_NAME')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001683"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001684"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001685"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001686"></A>/tmp/trdb0ewpxx</P>
<P CLASS="Indented">
<A NAME="pgfId-1001687"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001688"></A>&gt;&gt; dbquery(tr,'dbSCHEMA_NAME')  </P>
<P CLASS="Indented">
<A NAME="pgfId-1001689"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001690"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001691"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001692"></A>Trace4.0</P>
<P CLASS="Indented">
<A NAME="pgfId-1001693"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001670"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001701"></A>&nbsp;</P>
</UL>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-1001671"></A>trputwf</H1>
<P CLASS="Body">
<A NAME="pgfId-999489"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003393"></A>This is a deprecated interface for putting waveform data into a database. Please switch to trsave_wf.</P>
<P CLASS="Body">
<A NAME="pgfId-1003394"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001604"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001605"></A>&gt;&gt; db = dblookup_table( db, 'wfdisc' );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001632"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001606"></A>&gt;&gt; % Construct a fake waveform:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001607"></A>&gt;&gt; data = (0:999);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001608"></A>&gt;&gt; data = data * 32 * pi / 1000;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001609"></A>&gt;&gt; data = sin( data );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001633"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001610"></A>&gt;&gt; % Construct some variables describing the waveform:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001611"></A>&gt;&gt; nsamp = 1000;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001612"></A>&gt;&gt; samprate = 20;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001613"></A>&gt;&gt; foff = 0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001614"></A>&gt;&gt; datatype='t4';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001615"></A>&gt;&gt; dir='/tmp';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001616"></A>&gt;&gt; dfile='demo_sinewave';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001617"></A>&gt;&gt; sta='SINE';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001618"></A>&gt;&gt; chan='BHZ';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001620"></A>&gt;&gt; time = str2epoch('5/12/97 13:57:18.143');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001628"></A>&gt;&gt; endtime = tr_endtime( time, samprate, nsamp );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001631"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001638"></A>&gt;&gt; % Enter the description of the waveform data into the wfdisc table:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001642"></A>&gt;&gt; db.record = dbaddv(db,'sta',sta,'chan',chan, 'nsamp', nsamp, ...</P>
<P CLASS="Indented">
<A NAME="pgfId-1001643"></A>'samprate', samprate, 'time', time, 'endtime',endtime, ...</P>
<P CLASS="Indented">
<A NAME="pgfId-1001644"></A>'foff',foff, 'datatype',datatype, 'dir',dir,'dfile', dfile);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001645"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001649"></A>&gt;&gt; % Now put the actual data samples into the file, in the specified format:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001650"></A>&gt;&gt; trputwf( db, data );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001654"></A>&gt;&gt; % As a test, get the data back out:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001655"></A>&gt;&gt; [newdata, nsamp, t0, t1] = trgetwf( db, time-1, endtime+1 );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001656"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001657"></A>&gt;&gt; plot( newdata );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001658"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001636"></A>&nbsp;</P>
<DIV>
<IMG SRC="Antelope_Toolbox_for_Matlab-6.jpg">
</DIV>
<P CLASS="Body">
<A NAME="pgfId-999490"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999434"></A>trsave_wf</H1>
<P CLASS="Body">
<A NAME="pgfId-999487"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003397"></A>This command is the generic interface to put waveform database from a trace object into a database. For details see the Datascope man page on trsave_wf.</P>
<P CLASS="Body">
<A NAME="pgfId-1003398"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001787"></A>&gt;&gt; tr=trnew;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001788"></A>&gt;&gt; tr=dblookup_table(tr,'trace');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001789"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001790"></A>&gt;&gt; % Construct a fake waveform:</P>
<P CLASS="Indented">
<A NAME="pgfId-1002580"></A>&gt;&gt; amp = 10000;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001791"></A>&gt;&gt; data = amp * sin([0:999]); </P>
<P CLASS="Indented">
<A NAME="pgfId-1001792"></A>&gt;&gt; nsamp=1000;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001793"></A>&gt;&gt; sta='SINE';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001794"></A>&gt;&gt; chan='BHZ';</P>
<P CLASS="Indented">
<A NAME="pgfId-1001795"></A>&gt;&gt; time=str2epoch('now');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001796"></A>&gt;&gt; samprate=20;      </P>
<P CLASS="Indented">
<A NAME="pgfId-1001797"></A>&gt;&gt; endtime=tr_endtime(time,samprate,nsamp);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001798"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001799"></A>&gt;&gt; % Put the waveform into the trace-object:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001800"></A>&gt;&gt; tr.record=dbaddv( tr, 'net', 'AK', 'sta', 'SINE', 'chan', 'BHZ', 'nsamp', ...</P>
<P CLASS="Indented">
<A NAME="pgfId-1002031"></A>&gt;&gt; 'samprate', samprate, 'time', time, 'endtime', endtime );</P>
<P CLASS="Indented">
<A NAME="pgfId-1001802"></A>&gt;&gt; trinsert_data(tr,data)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001803"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001817"></A>&gt;&gt; % Save the trace data in a new database, with the underlying file in miniseed format:</P>
<P CLASS="Indented">
<A NAME="pgfId-1001811"></A>&gt;&gt; db=dbopen('/tmp/newdb','r+');       </P>
<P CLASS="Indented">
<A NAME="pgfId-1001812"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');     </P>
<P CLASS="Indented">
<A NAME="pgfId-1001813"></A>&gt;&gt; trsave_wf(tr,db,'sd','')            </P>
<P CLASS="Indented">
<A NAME="pgfId-1001814"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-999488"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999435"></A>trsplice</H1>
<P CLASS="Body">
<A NAME="pgfId-999485"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003399"></A>This routine attempts to splice together as many data segments as possible that are contained in the input trace object.</P>
<P CLASS="Body">
<A NAME="pgfId-1003400"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1001819"></A>&gt;&gt;  db = dbopen(demodb_path,'r');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001820"></A>&gt;&gt; db=dblookup_table(db,'wfdisc');</P>
<P CLASS="Indented">
<A NAME="pgfId-999486"></A>&gt;&gt; db=dbsubset(db,'sta == &quot;CHM&quot; &amp;&amp; chan == &quot;BHZ&quot;');</P>
<P CLASS="Indented">
<A NAME="pgfId-1001829"></A>&gt;&gt; db.record=0;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001834"></A>&gt;&gt; [time,endtime,samprate,nsamp]=dbgetv(db,'time','endtime','samprate','nsamp')</P>
<P CLASS="Indented">
<A NAME="pgfId-1001835"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001836"></A>time =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001837"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001838"></A>   7.0614e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1001839"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001840"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001841"></A>endtime =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001842"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001843"></A>   7.0614e+08</P>
<P CLASS="Indented">
<A NAME="pgfId-1001844"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001845"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001846"></A>samprate =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001847"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001848"></A>    20</P>
<P CLASS="Indented">
<A NAME="pgfId-1001849"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001850"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001851"></A>nsamp =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001852"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001853"></A>        2527</P>
<P CLASS="Indented">
<A NAME="pgfId-1001854"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001855"></A>&gt;&gt; </P>
<P CLASS="Indented">
<A NAME="pgfId-1001859"></A>&gt;&gt; tr=trload_css(db,time,time+10);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001860"></A>&gt;&gt; tr=trload_css(db,time+10,time+20,tr);</P>
<P CLASS="Indented">
<A NAME="pgfId-1001868"></A>&gt;&gt; dbquery(tr,'dbRECORD_COUNT')          </P>
<P CLASS="Indented">
<A NAME="pgfId-1001869"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001870"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001871"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001872"></A>     2</P>
<P CLASS="Indented">
<A NAME="pgfId-1001873"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001832"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001882"></A>&gt;&gt; strtime(dbgetv(tr,'time'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001883"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001884"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001885"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001886"></A>    ' 5/17/1992  21:55:15.200'</P>
<P CLASS="Indented">
<A NAME="pgfId-1001887"></A>    ' 5/17/1992  21:55:25.200'</P>
<P CLASS="Indented">
<A NAME="pgfId-1001888"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001889"></A>&gt;&gt; strtime(dbgetv(tr,'endtime'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001890"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001891"></A>ans = </P>
<P CLASS="Indented">
<A NAME="pgfId-1001892"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001893"></A>    ' 5/17/1992  21:55:25.150'</P>
<P CLASS="Indented">
<A NAME="pgfId-1001894"></A>    ' 5/17/1992  21:55:35.150'</P>
<P CLASS="Indented">
<A NAME="pgfId-1001895"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001827"></A>&gt;&gt;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001901"></A>&gt;&gt; trsplice(tr,0.5)</P>
<P CLASS="Indented">
<A NAME="pgfId-1001902"></A>&gt;&gt; dbquery(tr,'dbRECORD_COUNT') </P>
<P CLASS="Indented">
<A NAME="pgfId-1001903"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001904"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001905"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001906"></A>     1</P>
<P CLASS="Indented">
<A NAME="pgfId-1001907"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001908"></A>&gt;&gt; strtime(dbgetv(tr,'time'))   </P>
<P CLASS="Indented">
<A NAME="pgfId-1001909"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001910"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001911"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001912"></A> 5/17/1992  21:55:15.200</P>
<P CLASS="Indented">
<A NAME="pgfId-1001913"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001914"></A>&gt;&gt; strtime(dbgetv(tr,'endtime'))</P>
<P CLASS="Indented">
<A NAME="pgfId-1001915"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001916"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1001917"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001918"></A> 5/17/1992  21:55:35.150</P>
<P CLASS="Indented">
<A NAME="pgfId-1001919"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1001920"></A>&gt;&gt; </P>
</UL>
<P CLASS="Body">
<A NAME="pgfId-1001899"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="MyEx">
<A NAME="pgfId-999436"></A>yearday</H1>
<P CLASS="Body">
<A NAME="pgfId-999483"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003401"></A>This command takes a Unix epoch time and returns year*1000 + day-of-year.</P>
<P CLASS="Body">
<A NAME="pgfId-1003412"></A>&nbsp;</P>
<UL>
<P CLASS="Indented">
<A NAME="pgfId-1000646"></A>&gt;&gt; yearday(96998400)</P>
<P CLASS="Indented">
<A NAME="pgfId-1000647"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000648"></A>ans =</P>
<P CLASS="Indented">
<A NAME="pgfId-1000649"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000650"></A>     1973027</P>
<P CLASS="Indented">
<A NAME="pgfId-1000651"></A>&nbsp;</P>
<P CLASS="Indented">
<A NAME="pgfId-1000652"></A>&gt;&gt; </P>
</UL>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-999257"></A>Differences between the Matlab Antelope Toolbox and other Antelope language interfaces</H1>
<P CLASS="Body">
<A NAME="pgfId-999023"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999024"></A>The Matlab Antelope toolbox differs in several aspects from the Antelope language interfaces in C, Tcl, Fortran, and Perl. First, the natural mode of operation in Matlab is to work on entire arrays at once. Therefore, where possible, Antelope database commands have been expanded to read in entire matrices of results when appropriate (e.g. dbgetv), or to act on entire matrices at once (e.g. epoch2str). Similarly, where naming conventions permit, parameter-files may be loaded wholesale into Matlab structures with pf2struct, and database tables may be loaded into structures with db2struct. </P>
<P CLASS="Body">
<A NAME="pgfId-999025"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999030"></A>Special options to Antelope commands are usually specified with string input arguments, such as `backwards' for dbfind. In many cases the order of placement of these options is important--see the help pages on each command for details. </P>
<P CLASS="Body">
<A NAME="pgfId-999078"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999079"></A>The most general interface to Antelope, the C language interface, allows temporary views to be given user-specified names. This feature is not supported in the current release of the Matlab toolbox. </P>
<P CLASS="Body">
<A NAME="pgfId-997356"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-997357"></A>Caveats</H1>
<P CLASS="Body">
<A NAME="pgfId-997358"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997362"></A>This toolbox was developed on Sun-solaris 2.6, Matlab version 5.3. It has not been tested with other platforms and versions.</P>
<P CLASS="Body">
<A NAME="pgfId-997366"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997359"></A>Several aspects of this current beta release must be treated with caution. First, the database-pointer DBPTR and trace-pointer TRPTR objects refer to databases and memory open by the underlying Antelope libraries. Freeing these objects with the Matlab clear command does not appropriately close the underlying databases, nor free the corresponding memory. These objects must be removed from the Matlab workspace with the DBCLOSE and TRDESTROY commands provided. Note that the DBPTR and TRPTR structures are not objects in the Matlab sense--the word is being used loosely here, paralleling the Datascope documentation (for the trace objects). Conceptually they are very similar to objects, though the user can see and manipulate the private variables directly (useful, for example, to loop over the DBPTR.record field), and also there is no Matlab class tag. These items have been kept as Matlab structures rather than Objects to preserve similarity between the Matlab Antelope toolbox and other programming interfaces for Antelope. </P>
<P CLASS="Body">
<A NAME="pgfId-997367"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997368"></A>The parameter-file objects actually are Matlab objects. Again, though, they must be cleared carefully. The clear function is overloaded for the DBPF class of Objects, however at least in Matlab 5.2 the command/function duality is broken by the CLEAR command, and apparently the generic CLEAR command is not smart enough to call the overloaded methods for DBPF objects. One must specifically call the CLEAR function (i.e. use parentheses around the argument), or the equivalent PFFREE function, on the DBPF object. Also, the pf routines may at times return derivative DBPF objects, representing complex entries in the parent parameter-file (DBPF object). These first of all are not allowed to be cleared by the PFFREE command. Second, they lose meaning but unfortunately stay resident when the parent DBPF object (the one returned when the whole parameter file was read in) is cleared. Acting on them after destroying the originating DBPF may produce unpredictable results. </P>
<P CLASS="Body">
<A NAME="pgfId-997405"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1001938"></A>There are a lot more trace-library commands available, many of which have not yet been implemented. </P>
<P CLASS="Body">
<A NAME="pgfId-998950"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-997408"></A>The response-file objects are also actually Matlab objects. Just as with the DBPF objects, these need to be explicitly cleared with the overloaded clear functions, CLEAR(DBRESPONSE) or equivalently FREE_RESPONSE.</P>
<P CLASS="Body">
<A NAME="pgfId-999155"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003728"></A>While the doc command works for Antelope Toolbox commands, the Matlab helpdesk search engine does not yet recognize them. In order to search for Antelope Toolbox commands, use the matlab lookfor command or the search window in the Matlab helpwin help window. </P>
<P CLASS="Body">
<A NAME="pgfId-1003729"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1003840"></A>Unlike the other Antelope language interfaces, the Matlab dbeval is able to return entire columns of values if the input database pointer refers to more than one row. As a standard feature, dbeval can return values that are aggregate expressions over the whole table such as max(). If more than one row is passed to such an aggregate expression in Matlab, the aggregate expression will be recalculated for each row, which redundancy can cause huge performance drops for a large database. Therefore, unless otherwise necessary, the user should avoid passing multiple rows to dbeval when using aggregate expressions. See the Unix dbex_eval(3) man pages for the list of aggregate functions in the Antelope expressions calculator. </P>
<P CLASS="Body">
<A NAME="pgfId-1003841"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-1002589"></A>The Matlab interface to the orb routines is fairly new, and though tested, the Matlab toolbox routines have not been extensively used in implementation. There is the possibility of some change if initial experience shows any inconveniences.</P>
<P CLASS="Body">
<A NAME="pgfId-1002595"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1002596"></A>Author</H1>
<P CLASS="Body">
<A NAME="pgfId-998675"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998676"></A>The Antelope Software system, including the Datascope relational-database management</P>
<P CLASS="Body">
<A NAME="pgfId-998677"></A>system, is a product of Boulder Real-Time Technologies, Inc., http://brtt.com/</P>
<P CLASS="Body">
<A NAME="pgfId-998678"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998679"></A>The Antelope Toolbox for Matlab was written by</P>
<P CLASS="Body">
<A NAME="pgfId-998680"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998681"></A>Kent Lindquist</P>
<P CLASS="Body">
<A NAME="pgfId-998682"></A>Geophysical Institute</P>
<P CLASS="Body">
<A NAME="pgfId-998683"></A>University of Alaska, Fairbanks</P>
<P CLASS="Body">
<A NAME="pgfId-998684"></A>kent@giseis.alaska.edu</P>
<P CLASS="Body">
<A NAME="pgfId-998685"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-998686"></A>This development has been unfunded, therefore conducted almost entirely in my spare time, which means that I cannot offer official support for it. However, I am nevertheless very interested in feedback and bug reports.</P>
<P CLASS="Body">
<A NAME="pgfId-998687"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-998672"></A>Acknowledgment</H1>
<P CLASS="Body">
<A NAME="pgfId-999034"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999035"></A>This project would of course have gone nowhere without the underlying Antelope and Datascope software package provided by Boulder Real Time Technologies, Inc. The author would like to thank Danny Harvey for initial encouragement, and Dan Quinlan for extensive and valuable technical consultation and support in this work. Frank Vernon and his research group provided not only complete encouragement and positive feedback early on, but also significant help in beta-testing and debugging a production release. Beta testing was kindly provided by the research group of Gary Pavlis (including Scott Neal and Christian Poppeliers) at the University of Indiana, and by Geoff Abers at the University of Kansas. Local tolerance of experimental versions has been patiently extended to the author by University of Alaska Matlab users, notably Guy Tytgat. </P>
<P CLASS="Body">
<A NAME="pgfId-999036"></A>&nbsp;</P>
</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-999037"></A>References</H1>
<P CLASS="Body">
<A NAME="pgfId-999038"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999039"></A>Boulder Real Time Technologies, Inc. http://brtt.com/</P>
<P CLASS="Body">
<A NAME="pgfId-999040"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999041"></A>Kinemetrics, Inc. http://www.kinemetrics.com/</P>
<P CLASS="Body">
<A NAME="pgfId-999042"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="pgfId-999043"></A>Mathworks, Inc. http://www.mathworks.com/</P>
</DIV>
</BODY>
</HTML>
